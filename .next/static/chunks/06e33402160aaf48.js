(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52165,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(71689),n=e.i(66027),o=e.i(54616),i=e.i(12598),c=e.i(9165),d=e.i(70098),p=e.i(46696);function _({params:e}){let{id:_}=(0,a.use)(e),u=(0,s.useRouter)(),h=(0,i.useQueryClient)(),{data:l,isLoading:m,error:x}=(0,n.useQuery)({queryKey:["reports",_],queryFn:()=>c.reportsApi.getById(_),enabled:!!_}),y=(0,o.useMutation)({mutationFn:e=>c.reportsApi.update(_,e),onSuccess:()=>{h.invalidateQueries({queryKey:["reports"]}),p.toast.success("Report updated successfully")},onError:e=>{p.toast.error(e.message||"Failed to update report")}}),g=async e=>{try{let t={requester_name:e.requester_name,requester_phone:e.requester_phone,transport_type:e.transport_type,use_stretcher:e.use_stretcher,patient_name:e.patient_name,patient_gender:e.patient_gender,patient_age:e.patient_age,patient_history:e.patient_history,pickup_address:e.pickup_address,destination_address:e.destination_address,schedule_date:e.schedule_date,schedule_time:e.schedule_time,contact_person_name:e.contact_person_name,contact_person_phone:e.contact_person_phone,note:e.note,attachment_ktp:e.attachment_ktp,attachment_house_photo:e.attachment_house_photo,attachment_sharelok:e.attachment_sharelok};await y.mutateAsync(t),u.refresh(),u.push(`/dashboard/reports/${_}`)}catch(e){console.error("Failed to update report:",e)}};if(m)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading report data..."})]})});if(x||!l)return(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:x?`Error: ${x instanceof Error?x.message:"Failed to load report"}`:"Report not found"}),(0,t.jsx)("button",{onClick:()=>u.back(),className:"text-red-600 hover:text-red-700 font-medium",children:"â† Go Back"})]});let b={requester_name:l.requester_name,requester_phone:l.requester_phone,transport_type:l.transport_type,use_stretcher:l.use_stretcher,patient_name:l.patient_name,patient_gender:l.patient_gender,patient_age:l.patient_age,patient_history:l.patient_history||"",pickup_address:l.pickup_address,destination_address:l.destination_address,schedule_date:l.schedule_date,schedule_time:l.schedule_time,contact_person_name:l.contact_person_name,contact_person_phone:l.contact_person_phone,note:l.note||"",attachment_ktp:l.attachment_ktp||"",attachment_house_photo:l.attachment_house_photo||"",attachment_sharelok:l.attachment_sharelok||""};return(0,t.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>u.back(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(r.ArrowLeft,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Report"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Update emergency incident report #",_.slice(0,8)]})]})]}),(0,t.jsx)(d.default,{initialData:b,onSubmit:g,isSubmitting:y.isPending,submitButtonText:"Update Report"})]})}e.s(["default",()=>_])}]);