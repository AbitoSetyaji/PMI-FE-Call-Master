(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},34858,e=>{"use strict";let t=(0,e.i(75254).default)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);e.s(["Navigation",()=>t],34858)},80787,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(54338),l=e.i(18566),i=e.i(46897);let r=(0,e.i(75254).default)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var n=e.i(16715),d=e.i(34858);function o(){let{user:e,isLoading:o}=(0,a.useAuth)(),c=(0,l.useRouter)(),[x,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)([]);return((0,s.useEffect)(()=>{o||(e?"driver"!==e.role&&c.push("/dashboard"):c.push("/login"))},[e,o,c]),o)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-red-600 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e&&"driver"===e.role?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Location Sharing"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Share your location for real-time tracking"})]}),(0,t.jsx)(d.Navigation,{className:"w-12 h-12 text-blue-600"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r,{className:`w-6 h-6 ${x?"text-green-600":"text-gray-400"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Status"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:x?"On Duty":"Off Duty"})]})]}),(0,t.jsx)("button",{onClick:()=>{u(!x),y(null)},className:`px-4 py-2 rounded-lg font-medium transition-colors ${x?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:x?"Go Off Duty":"Go On Duty"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.RefreshCw,{className:`w-6 h-6 ${m?"text-blue-600":"text-gray-400"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Auto-Update"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m?"Enabled":"Disabled"})]})]}),(0,t.jsx)("button",{onClick:()=>h(!m),disabled:!x,className:`px-4 py-2 rounded-lg font-medium transition-colors ${m?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:m?"Disable":"Enable"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(i.MapPin,{className:"w-6 h-6 text-red-600"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Current Location"})]}),g?(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsxs)("p",{children:["Lat: ",g.lat.toFixed(6)]}),(0,t.jsxs)("p",{children:["Lng: ",g.lng.toFixed(6)]})]}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No location yet"}),(0,t.jsx)("button",{onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s}=e.coords;p({lat:t,lng:s}),y(null)},e=>{y(`Error getting location: ${e.message}`)}):y("Geolocation is not supported by this browser")},className:"mt-2 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Get Location"})]})]}),b&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:b})}),(0,t.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>{g&&N([{id:Date.now().toString(),latitude:g.lat,longitude:g.lng,timestamp:new Date().toISOString(),status:x?"on_duty":"idle",updated_at:new Date().toISOString()},...j])},disabled:!g||!x,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Update Location Now"}),m&&(0,t.jsxs)("p",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(n.RefreshCw,{className:"w-4 h-4 mr-2 animate-spin"}),"Auto-updating every 30 seconds"]})]})]}),j.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Location Updates"}),(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:j.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.MapPin,{className:`w-5 h-5 ${"on_duty"===e.status?"text-green-600":"text-gray-400"}`}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"on_duty"===e.status?"bg-green-100 text-green-800":"bg-gray-200 text-gray-600"}`,children:"on_duty"===e.status?"On Duty":"Idle"}),0===s&&(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Latest"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"How to use:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[(0,t.jsx)("li",{children:'Click "Go On Duty" to start sharing your location'}),(0,t.jsx)("li",{children:'Enable "Auto-Update" to automatically send location every 30 seconds'}),(0,t.jsx)("li",{children:'Click "Get Location" to manually fetch your current position'}),(0,t.jsx)("li",{children:'Click "Update Location Now" to manually send location to server'}),(0,t.jsx)("li",{children:"Your location will be visible on the tracking dashboard"})]})]})]})}):null}e.s(["default",()=>o],80787)}]);