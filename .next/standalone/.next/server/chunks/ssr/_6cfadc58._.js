module.exports=[69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},51852,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(19032),f=a.i(19721),g=a.i(24987),h=a.i(69520),i=a.i(60246);let j=(0,f.default)(async()=>{},{loadableGenerated:{modules:[64224]},ssr:!1}),k=(0,f.default)(async()=>{},{loadableGenerated:{modules:[30094]},ssr:!1}),l=(0,f.default)(async()=>{},{loadableGenerated:{modules:[79365]},ssr:!1}),m=(0,f.default)(async()=>{},{loadableGenerated:{modules:[87231]},ssr:!1});function n(){let[a,f]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),t=["#ef4444","#3b82f6","#22c55e","#f97316","#8b5cf6","#ec4899","#14b8a6","#eab308"],u=a=>t[a%t.length];(0,c.useEffect)(()=>{o(!0)},[]);let{data:v,isLoading:w,refetch:x,dataUpdatedAt:y}=(0,d.useQuery)({queryKey:["driver-locations"],queryFn:()=>e.driverLocations.getDriverLocations(),staleTime:0,refetchInterval:!!a&&5e3,refetchIntervalInBackground:!0}),z=v?.data||[],A=z.filter(a=>!1!==a.has_location);z.filter(a=>!1===a.has_location);let B=A.filter(a=>a.assignment_id),C=A.filter(a=>!a.assignment_id),D=[-6.982436657260785,110.40556559821519],E=A.length>0?[A.reduce((a,b)=>a+b.latitude,0)/A.length,A.reduce((a,b)=>a+b.longitude,0)/A.length]:D,F=new Date(y);return(0,b.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)(g.MapPin,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:"Pelacakan Real-Time"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Pantau lokasi driver secara real-time"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{x()},className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[(0,b.jsx)(h.RefreshCw,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Segarkan"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:a,onChange:a=>f(a.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500 w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Otomatis"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 md:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl md:text-3xl font-bold text-gray-900",children:z.length})]}),(0,b.jsx)(i.Users,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-12 md:h-12 text-gray-400 hidden xs:block"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 md:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Bertugas"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl md:text-3xl font-bold text-red-600",children:B.length})]}),(0,b.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-12 md:h-12 bg-red-100 rounded-full hidden xs:flex items-center justify-center",children:(0,b.jsx)(g.MapPin,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-6 md:h-6 text-red-600"})})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 md:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Siaga"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl md:text-3xl font-bold text-gray-600",children:C.length})]}),(0,b.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-12 md:h-12 bg-gray-100 rounded-full hidden xs:flex items-center justify-center",children:(0,b.jsx)(g.MapPin,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-6 md:h-6 text-gray-600"})})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-2 sm:p-3 md:p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:"Lokasi Driver"}),(0,b.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:n?F.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"--:--:--"})]}),w?(0,b.jsx)("div",{className:"h-[600px] flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.RefreshCw,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Memuat peta..."})]})}):(0,b.jsxs)("div",{className:"h-[300px] sm:h-[350px] md:h-[400px] lg:h-[500px] relative",children:[(0,b.jsxs)(j,{center:E,zoom:A.length>0?13:14,children:[(0,b.jsx)(l,{position:r,zoom:16}),(0,b.jsx)(m,{position:D,name:"Kantor PMI Kota Semarang",address:"Jl. Mgr. Soegijapranata, Semarang"}),A.map((a,c)=>(0,b.jsx)(k,{location:a,color:u(c)},a.id))]}),0===A.length&&(0,b.jsx)("div",{className:"absolute top-2 left-2 right-2 z-[1000] pointer-events-none",children:(0,b.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 shadow-md inline-flex items-center gap-2 pointer-events-auto",children:[(0,b.jsx)(g.MapPin,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-amber-800 font-medium text-sm",children:"Tidak ada driver aktif"}),(0,b.jsx)("p",{className:"text-amber-600 text-xs",children:z.length>0?`${z.length} driver terdaftar, menunggu berbagi lokasi`:"Menunggu driver mulai berbagi lokasi"})]})]})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"p-2 sm:p-3 md:p-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:"Driver Aktif"})}),0===z.length?(0,b.jsx)("div",{className:"p-4 sm:p-6 md:p-8 text-center text-gray-500 text-sm sm:text-base",children:"Tidak ada driver online"}):(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:z.map((a,c)=>(0,b.jsxs)("div",{onClick:()=>{let b=p===a.id;q(b?null:a.id),b||s([a.latitude,a.longitude])},className:`p-2 sm:p-3 md:p-4 cursor-pointer transition-colors ${p===a.id?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full shadow-md border-2 border-white flex-shrink-0",style:{backgroundColor:u(c)}}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:a.driver_name||"Unknown Driver"}),a.vehicle_license_plate&&(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:["ðŸš— ",a.vehicle_license_plate]})]})]}),(0,b.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-1.5 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium ${!1===a.has_location?"bg-yellow-100 text-yellow-800":a.assignment_id?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:!1===a.has_location?"ðŸ“ Tidak Ada Lokasi":a.assignment_id?"ðŸ”´ Bertugas":"âšª Siaga"}),(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5 sm:mt-1",children:n&&a.timestamp?new Date(a.timestamp).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"--:--:--"})]})]}),p===a.id&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"ðŸ“‹ Detail Penugasan"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Kendaraan"}),(0,b.jsx)("p",{className:"font-medium",children:a.vehicle_license_plate||"Tidak ada"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Driver"}),(0,b.jsx)("p",{className:"font-medium",children:a.driver_name||"Unknown"})]})]})]}),a.report&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"ðŸ‘¤ Informasi Pemohon"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Nama"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.requester_name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Telepon"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.requester_phone||"-"})]})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"ðŸš‘ Informasi Transportasi"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Jenis Transportasi"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:a.report.transport_type?.replace(/_/g," ")||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Peti Jenazah"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.use_stretcher?"âœ“ Ya":"âœ— Tidak"})]})]})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"ðŸ“ Lokasi Jemput & Tujuan"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"ðŸ“ Alamat Jemput"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.pickup_address||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"ðŸ¥ Alamat Tujuan"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.destination_address||"-"})]}),a.report.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"ðŸ“ Catatan"}),(0,b.jsx)("p",{className:"font-medium",children:a.report.notes})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"ðŸŒ Lokasi Saat Ini"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Latitude"}),(0,b.jsx)("p",{className:"font-mono font-medium",children:a.latitude.toFixed(6)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Longitude"}),(0,b.jsx)("p",{className:"font-mono font-medium",children:a.longitude.toFixed(6)})]})]})]}),(0,b.jsx)("a",{href:`https://www.google.com/maps?q=${a.latitude},${a.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm transition-colors",children:"ðŸ—ºï¸ Buka di Google Maps"})]})]},a.id))})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=_6cfadc58._.js.map