module.exports=[69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},42803,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(19032),f=a.i(19721),g=a.i(24987),h=a.i(69520),i=a.i(60246);let j=(0,f.default)(async()=>{},{loadableGenerated:{modules:[64224]},ssr:!1}),k=(0,f.default)(async()=>{},{loadableGenerated:{modules:[30094]},ssr:!1});function l(){let[a,f]=(0,c.useState)(!0),{data:l,isLoading:m,refetch:n,dataUpdatedAt:o}=(0,d.useQuery)({queryKey:["driver-locations"],queryFn:()=>e.driverLocations.getDriverLocations(),staleTime:0,refetchInterval:!!a&&5e3,refetchIntervalInBackground:!0}),p=l?.data||[],q=p.filter(a=>a.assignment_id),r=p.filter(a=>!a.assignment_id),s=p.length>0?[p.reduce((a,b)=>a+b.latitude,0)/p.length,p.reduce((a,b)=>a+b.longitude,0)/p.length]:[-6.2088,106.8456],t=new Date(o);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.MapPin,{className:"w-8 h-8 text-red-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Real-Time Tracking"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor driver locations in real-time"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>{n()},className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(h.RefreshCw,{className:"w-4 h-4"}),"Refresh"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:a,onChange:a=>f(a.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-refresh (30s)"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Drivers"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:p.length})]}),(0,b.jsx)(i.Users,{className:"w-12 h-12 text-gray-400"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"On Duty"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-1",children:q.length})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(g.MapPin,{className:"w-6 h-6 text-red-600"})})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Idle"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-600 mt-1",children:r.length})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(g.MapPin,{className:"w-6 h-6 text-gray-600"})})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Driver Locations"}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",t.toLocaleTimeString()]})]}),m?(0,b.jsx)("div",{className:"h-[600px] flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.RefreshCw,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})}):0===p.length?(0,b.jsx)("div",{className:"h-[600px] flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.MapPin,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No driver locations available"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Drivers will appear here once they start sharing their location"})]})}):(0,b.jsx)("div",{className:"h-[600px]",children:(0,b.jsx)(j,{center:s,zoom:12,children:p.map(a=>(0,b.jsx)(k,{location:a},a.id))})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Active Drivers"})}),0===p.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No drivers online"}):(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:p.map(a=>(0,b.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${a.assignment_id?"bg-red-600":"bg-gray-400"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.driver_name}),a.vehicle_license_plate&&(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Vehicle: ",a.vehicle_license_plate]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.assignment_id?"On Duty":"Idle"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.updated_at?new Date(a.updated_at).toLocaleTimeString():"-"})]})]})},a.id))})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_e97191b0._.js.map