module.exports=[93273,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(37927),g=a.i(19032),h=a.i(32636),i=a.i(50944),j=a.i(92e3),k=a.i(73570),l=a.i(16201),m=a.i(41710),n=a.i(24987),o=a.i(63519),p=a.i(70106);let q=(0,p.default)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var r=a.i(10227),s=a.i(41675);let t=(0,p.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),u=(0,p.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var v=a.i(74566),w=a.i(55486),x=a.i(19456),y=a.i(12171),z=a.i(68114),A=a.i(23292);function B(){let{user:a}=(0,h.useAuth)(),p=(0,i.useRouter)(),B=(0,f.useQueryClient)(),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),O=(0,c.useRef)(null),P=(0,c.useRef)(null),Q=(0,c.useRef)(null),[R,S]=(0,c.useState)({isOpen:!1,status:null,title:"",message:""}),{data:T,isLoading:U}=(0,d.useQuery)({queryKey:["driver-assignments",a?.id],queryFn:()=>g.assignmentsApi.getAssignmentsByDriver(a.id),enabled:!!a?.id&&a?.role==="driver",staleTime:0,refetchInterval:5e3,refetchIntervalInBackground:!0}),V=(0,e.useMutation)({mutationFn:a=>g.reportsApi.updateReportStatus(Y.report_id,{status:a}),onSuccess:(a,b)=>{A.toast.success({on_way:"Departure confirmed - On the way",arrived_pickup:"Arrived at pickup location",arrived_destination:"Arrived at destination",done:"Assignment completed"}[b]||"Status updated"),B.invalidateQueries({queryKey:["driver-assignments"]}),B.invalidateQueries({queryKey:["assignments"]}),B.invalidateQueries({queryKey:["report",Y.report_id]}),B.invalidateQueries({queryKey:["reports"]})},onError:a=>{A.toast.error(a.message||"Failed to update status")}}),W=(0,e.useMutation)({mutationFn:a=>g.assignmentsApi.updateDriverAssignment(Y.id,{vehicle_id:a}),onSuccess:()=>{A.toast.success("Vehicle assigned successfully"),B.invalidateQueries({queryKey:["driver-assignments"]}),D(!1)},onError:a=>{A.toast.error(a.message||"Failed to assign vehicle")}}),X=T?.data||[],Y=X.filter(a=>"completed"!==a.status).sort((a,b)=>{let c=new Date(a.assigned_at).getTime();return new Date(b.assigned_at).getTime()-c})[0],{data:Z}=(0,d.useQuery)({queryKey:["report",Y?.report_id],queryFn:()=>g.reportsApi.getById(Y.report_id),enabled:!!Y?.report_id}),{data:$}=(0,d.useQuery)({queryKey:["vehicle",Y?.vehicle_id],queryFn:()=>g.vehiclesApi.getById(Y.vehicle_id),enabled:!!Y?.vehicle_id}),_=$?.data,aa=(0,c.useCallback)(async(b,c)=>{if(!a?.id)return void console.error("No user ID available");try{await (0,g.createDriverLocation)({driver_id:a.id,latitude:b,longitude:c,assignment_id:Y?.id}),L(new Date),N(null)}catch(a){console.error("Failed to send location:",a),N("Gagal mengirim lokasi ke server")}},[a?.id,Y?.id]),ab=(0,c.useCallback)(()=>{navigator.geolocation?(H(!0),N(null),P.current=navigator.geolocation.watchPosition(a=>{let{latitude:b,longitude:c}=a.coords;J({lat:b,lng:c}),N(null)},a=>{if(console.error("Geolocation watch error:",a.code,a.message),3!==a.code){let b={1:"Akses lokasi ditolak. Silakan izinkan akses lokasi di browser settings.",2:"Lokasi tidak tersedia. Pastikan GPS aktif.",3:"Timeout saat melacak lokasi."}[a.code]||"Gagal mendapatkan lokasi: "+a.message;N(b),A.toast.error(b)}},{enableHighAccuracy:!0,timeout:3e4,maximumAge:5e3}),O.current=setInterval(()=>{let a=b=>{navigator.geolocation.getCurrentPosition(async a=>{let{latitude:b,longitude:c}=a.coords;J({lat:b,lng:c}),await aa(b,c)},c=>{console.error("Failed to get position for update:",c),b&&3===c.code&&(console.log("Retrying with low accuracy..."),a(!1))},{enableHighAccuracy:b,timeout:b?15e3:3e4,maximumAge:1e4})};a(!0)},3e4),navigator.geolocation.getCurrentPosition(async a=>{let{latitude:b,longitude:c}=a.coords;J({lat:b,lng:c}),await aa(b,c),A.toast.success("Location sharing aktif")},a=>{if(console.error("Failed to get initial position:",a.code,a.message),3===a.code)navigator.geolocation.getCurrentPosition(async a=>{let{latitude:b,longitude:c}=a.coords;J({lat:b,lng:c}),await aa(b,c),A.toast.success("Location sharing aktif (low accuracy)")},a=>{console.error("Failed to get position even with low accuracy:",a),N("Gagal mendapatkan lokasi. Pastikan GPS aktif dan izinkan akses lokasi.")},{enableHighAccuracy:!1,timeout:3e4,maximumAge:3e4});else{let b={1:"Akses lokasi ditolak. Silakan izinkan akses lokasi di browser settings.",2:"Lokasi tidak tersedia. Pastikan GPS aktif.",3:"Timeout saat mendapatkan lokasi."}[a.code]||"Gagal mendapatkan lokasi awal: "+a.message;N(b),A.toast.error(b)}},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})):N("Geolocation tidak didukung oleh browser")},[aa]),ac=(0,c.useCallback)(()=>{null!==P.current&&(navigator.geolocation.clearWatch(P.current),P.current=null),O.current&&(clearInterval(O.current),O.current=null),H(!1),J(null),L(null),A.toast.info("Location sharing dimatikan")},[]);if((0,c.useEffect)(()=>{Y?.vehicle_id&&Z&&"done"!==Z.status&&"canceled"!==Z.status&&!G&&ab()},[Y?.vehicle_id,Z?.status,G,ab]),(0,c.useEffect)(()=>{Z&&("done"===Z.status||"canceled"===Z.status)&&G&&ac()},[Z?.status,G,ac]),(0,c.useEffect)(()=>()=>{null!==P.current&&navigator.geolocation.clearWatch(P.current),O.current&&clearInterval(O.current),Q.current&&clearInterval(Q.current)},[]),(0,c.useEffect)(()=>{if(Y&&(!Z||"done"!==Z.status&&"canceled"!==Z.status))return(0,g.refreshAuthToken)().then(a=>{a&&console.log("ðŸ” Initial token refresh successful")}),Q.current=setInterval(async()=>{await (0,g.refreshAuthToken)()?console.log("ðŸ” Token auto-refreshed for active assignment"):(console.warn("âš ï¸ Token refresh failed - session may expire"),A.toast.warning("Session akan segera berakhir. Simpan pekerjaan Anda."))},12e5),()=>{Q.current&&(clearInterval(Q.current),Q.current=null)};Q.current&&(clearInterval(Q.current),Q.current=null)},[Y,Z?.status]),(0,c.useEffect)(()=>{a&&"driver"!==a.role&&p.push("/dashboard")},[a,p]),!a||"driver"!==a.role)return null;let ad=new Date;ad.setHours(0,0,0,0);let ae=X.filter(a=>"completed"===a.status&&new Date(a.completed_at||"")>=ad).length,af=X.filter(a=>"completed"===a.status).length,ag=a=>{let{title:b,message:c}={on_way:{title:"Confirm Departure",message:"Are you sure you want to confirm departure? This will mark your status as 'On the Way' to the pickup location."},arrived_pickup:{title:"Confirm Arrival at Pickup",message:"Have you arrived at the pickup location? This will update your status to 'Arrived at Pickup'."},arrived_destination:{title:"Confirm Arrival at Destination",message:"Have you arrived at the destination? This will update your status to 'Arrived at Destination'."},done:{title:"Mark as Completed",message:"Are you sure you want to mark this assignment as completed? This action will finalize the assignment."}}[a];S({isOpen:!0,status:a,title:b,message:c})};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Driver Dashboard"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",a?.name,"!"]})]}),(0,b.jsx)(r.Truck,{className:"w-12 h-12 text-red-600"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Today"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-1",children:ae})]}),(0,b.jsx)(l.CheckCircle,{className:"w-12 h-12 text-green-400"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Completed"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:af})]}),(0,b.jsx)(s.Calendar,{className:"w-12 h-12 text-blue-400"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Assignment"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-1",children:Y&&(!Z||"done"!==Z.status&&"canceled"!==Z.status)?"1":"0"})]}),(0,b.jsx)(m.Clock,{className:"w-12 h-12 text-red-400"})]})})]}),Y?.vehicle_id&&Z&&"done"!==Z.status&&"canceled"!==Z.status&&(0,b.jsx)("div",{className:`rounded-lg shadow p-4 ${G?"bg-green-50 border-2 border-green-400":"bg-gray-50 border border-gray-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-full ${G?"bg-green-100":"bg-gray-200"}`,children:(0,b.jsx)(v.Navigation,{className:`w-6 h-6 ${G?"text-green-600 animate-pulse":"text-gray-400"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:["ðŸ“ Location Sharing",G&&(0,b.jsx)("span",{className:"text-xs font-normal bg-green-600 text-white px-2 py-0.5 rounded-full animate-pulse",children:"ACTIVE"})]}),G?(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[I&&(0,b.jsxs)("p",{children:["Lat: ",I.lat.toFixed(6),", Lng: ",I.lng.toFixed(6)]}),K&&(0,b.jsxs)("p",{className:"text-xs text-green-600",children:["Last update: ",K.toLocaleTimeString()," â€¢ Auto-update setiap 30 detik"]})]}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:M||"Menunggu aktivasi..."})]})]}),G&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Tracking"})]})]})}),U?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading assignment..."})}):Y&&(!Z||"done"!==Z.status&&"canceled"!==Z.status)?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-red-600 px-6 py-4",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:"Active Assignment"})}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full animate-pulse ${Z?.status==="on_way"||Z?.status==="arrived_pickup"||Z?.status==="arrived_destination"?"bg-green-500":"bg-blue-500"}`}),(0,b.jsx)("span",{className:"text-lg font-bold text-gray-900",children:Z?"pending"===Z.status?"ðŸ“‹ Pending":"assigned"===Z.status?"ðŸ“Œ Assigned":"on_way"===Z.status?"ðŸš€ On the Way":"arrived_pickup"===Z.status?"ðŸ“ At Pickup Location":"arrived_destination"===Z.status?"ðŸ¥ At Destination":"done"===Z.status?"âœ… Completed":Z.status:"ðŸ“‹ Loading..."})]})}),Z&&(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:["assigned"===Z.status&&Y.vehicle_id&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("button",{onClick:()=>ag("on_way"),disabled:V.isPending||Z.use_stretcher&&!E,className:"w-full group relative overflow-hidden bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 transition-all duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 rounded-full p-2",children:(0,b.jsx)(q,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-lg font-bold",children:V.isPending?"Updating...":"ðŸš€ Confirm Departure"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600 to-emerald-700 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),Z.use_stretcher&&!E&&(0,b.jsx)("p",{className:"text-center text-sm text-red-600 font-medium",children:"âš ï¸ Konfirmasi checklist perlengkapan di bawah untuk dapat berangkat"})]}),"on_way"===Z.status&&(0,b.jsxs)("button",{onClick:()=>ag("arrived_pickup"),disabled:V.isPending,className:"group relative overflow-hidden bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 transition-all duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 rounded-full p-2",children:(0,b.jsx)(n.MapPin,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-lg font-bold",children:V.isPending?"Updating...":"ðŸ“ Arrived at Pickup"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-700 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),"arrived_pickup"===Z.status&&(0,b.jsxs)("button",{onClick:()=>ag("arrived_destination"),disabled:V.isPending,className:"group relative overflow-hidden bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 transition-all duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 rounded-full p-2",children:(0,b.jsx)(n.MapPin,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-lg font-bold",children:V.isPending?"Updating...":"ðŸ¥ Arrived at Destination"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-700 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),"arrived_destination"===Z.status&&(0,b.jsxs)("button",{onClick:()=>ag("done"),disabled:V.isPending,className:"group relative overflow-hidden bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100 transition-all duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 rounded-full p-2",children:(0,b.jsx)(l.CheckCircle,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-lg font-bold",children:V.isPending?"Updating...":"âœ… Mark as Done"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600 to-teal-700 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-600"}),"Emergency Report"]}),Z?(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Requester Name"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:Z.requester_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Requester Phone"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"w-4 h-4"}),Z.requester_phone]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Patient Name"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900",children:[Z.patient_name," - ",Z.patient_age," years old"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Patient Gender"}),(0,b.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:Z.patient_gender})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Location"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(n.MapPin,{className:"w-4 h-4"}),Z.pickup_address]}),Z.pickup_address&&(0,b.jsx)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Z.pickup_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline mt-1 inline-block",children:"Open in Google Maps â†’"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Destination"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:Z.destination_address})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Report Status"}),(0,b.jsx)(w.Badge,{variant:Z.status||"pending",children:Z.status})]})]}):(0,b.jsx)("p",{className:"text-gray-500",children:"Loading report details..."})]}),(0,b.jsxs)("div",{className:`border rounded-lg p-4 ${Z?.use_stretcher?"border-red-400 bg-red-50":"border-gray-200"}`,children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(r.Truck,{className:"w-5 h-5 text-blue-600"}),"Transport Information"]}),Z?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Transport Type"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:Z.transport_type_name?Z.transport_type_name.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()):"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Coffin Required"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:Z.use_stretcher?"âœ“ Yes":"âœ— No"})]})]}),Z.use_stretcher&&(0,b.jsx)("div",{className:"bg-red-600 text-white rounded-lg p-4 shadow-lg animate-pulse",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-8 h-8 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-lg",children:"âš ï¸ PETI JENAZAH DIPERLUKAN"}),(0,b.jsx)("p",{className:"text-sm text-red-100 mt-1",children:"Pastikan peti jenazah dan perlengkapan sudah siap sebelum berangkat!"})]})]})}),Z.use_stretcher&&(0,b.jsxs)("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-amber-800 mb-3 flex items-center gap-2",children:"ðŸ“‹ Checklist Persiapan Perlengkapan"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4 text-amber-600"}),"Peti jenazah dalam kondisi baik"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4 text-amber-600"}),"Kain kafan dan penutup jenazah"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4 text-amber-600"}),"Sarung tangan dan APD lengkap"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4 text-amber-600"}),"Pengharum/disinfektan"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4 text-amber-600"}),"Tali pengikat dan pengaman"]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-amber-300",children:[(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer select-none",onClick:()=>F(!E),children:[E?(0,b.jsx)(u,{className:"w-6 h-6 text-green-600"}):(0,b.jsx)(t,{className:"w-6 h-6 text-gray-400"}),(0,b.jsx)("span",{className:`font-medium ${E?"text-green-700":"text-gray-700"}`,children:"Saya konfirmasi semua perlengkapan sudah siap dan diperiksa"})]}),!E&&"assigned"===Z.status&&Y.vehicle_id&&(0,b.jsxs)("p",{className:"text-red-600 text-sm mt-2 flex items-center gap-1",children:[(0,b.jsx)(j.AlertCircle,{className:"w-4 h-4"}),"Anda harus mengkonfirmasi checklist sebelum dapat berangkat"]})]})]})]}):(0,b.jsx)("p",{className:"text-gray-500",children:"Loading transport information..."})]}),(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(r.Truck,{className:"w-5 h-5 text-blue-600"}),"Vehicle Details"]}),_?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Vehicle Name"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:_.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Plate Number"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:_.plate_number})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Type"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:_.vehicle_type_name?_.vehicle_type_name.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()):_.vehicle_type?.name||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,b.jsx)(w.Badge,{variant:_.status,children:_.status})]})]}),Z?.status==="assigned"&&(0,b.jsxs)("button",{onClick:()=>D(!0),disabled:W.isPending,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50 transition-all duration-200",children:[(0,b.jsx)(r.Truck,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:W.isPending?"Changing...":"Change Vehicle"})]})]}):Y.vehicle_id?(0,b.jsx)("p",{className:"text-gray-500",children:"Loading vehicle details..."}):(0,b.jsxs)("button",{onClick:()=>D(!0),disabled:W.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,b.jsx)(r.Truck,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium",children:W.isPending?"Assigning...":"ðŸš— Select Vehicle"})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Timeline"}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(m.Clock,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Assigned:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:(0,z.formatDateTime)(Y.assigned_at)})]})})]})]})]}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,b.jsx)(l.CheckCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Assignment"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have any active assignments at the moment."}),(0,b.jsx)("button",{onClick:()=>p.push("/driver/assignments"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"View All Assignments"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("button",{onClick:()=>p.push("/driver/assignments"),className:"bg-white rounded-lg shadow p-6 text-left hover:shadow-lg transition-shadow",children:[(0,b.jsx)(m.Clock,{className:"w-8 h-8 text-blue-600 mb-3"}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"My Assignments"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"View all your assignments and history"})]}),(0,b.jsxs)("button",{onClick:()=>p.push("/driver/location"),className:"bg-white rounded-lg shadow p-6 text-left hover:shadow-lg transition-shadow",children:[(0,b.jsx)(n.MapPin,{className:"w-8 h-8 text-green-600 mb-3"}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Update Location"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Share your current location with dispatch"})]})]})]}),(0,b.jsx)(x.default,{isOpen:C,onClose:()=>D(!1),onSelectVehicle:a=>{W.mutate(a)},transportTypeId:Z?.transport_type}),(0,b.jsx)(y.ConfirmDialog,{isOpen:R.isOpen,onClose:()=>{S({isOpen:!1,status:null,title:"",message:""})},onConfirm:()=>{R.status&&(V.mutate(R.status),S({isOpen:!1,status:null,title:"",message:""}))},title:R.title,message:R.message,confirmText:"Yes, Confirm",cancelText:"Cancel",type:"info",isLoading:V.isPending})]})}a.s(["default",()=>B],93273)}];

//# sourceMappingURL=src_app_%28dashboard%29_driver_page_tsx_88c78dac._.js.map