{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/api.ts"],"sourcesContent":["import type {\r\n  User,\r\n  Vehicle,\r\n  VehicleType,\r\n  Report,\r\n  Assignment,\r\n  DriverLocation,\r\n  CreateVehicleTypeRequest,\r\n  CreateVehicleRequest,\r\n  UpdateVehicleRequest,\r\n  CreateReportRequest,\r\n  UpdateReportRequest,\r\n  CreateAssignmentRequest,\r\n  UpdateAssignmentRequest,\r\n  CreateDriverLocationRequest,\r\n  ApiResponse,\r\n  PaginatedResponse,\r\n} from \"./types\";\r\n\r\nconst API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\";\r\n\r\n// Helper function for API calls\r\nasync function apiCall<T>(\r\n  endpoint: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"pmi_auth_token\") : null;\r\n\r\n  const headers = new Headers(options.headers);\r\n  headers.set(\"Content-Type\", \"application/json\");\r\n\r\n  if (token) {\r\n    headers.set(\"Authorization\", `Bearer ${token}`);\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json();\r\n    throw new Error(error.message || `API Error: ${response.status}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n// ============== USERS (helper functions) ==============\r\n\r\nexport async function getUserById(id: string): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateUser(\r\n  id: string,\r\n  data: Partial<User>\r\n): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\n// ============== VEHICLE TYPES ==============\r\nexport const vehicleTypes = {\r\n  getVehicleTypes: async (): Promise<ApiResponse<VehicleType[]>> => {\r\n    return await apiCall<ApiResponse<VehicleType[]>>(\"/vehicle-types\");\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  },\r\n  createVehicleType: async (data: CreateVehicleTypeRequest): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicleType: async (id: string, data: Partial<CreateVehicleTypeRequest>): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicleType: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicle-types/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\nexport const vehicleTypesApi = vehicleTypes;\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleTypeById(id: string): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicleType(data: CreateVehicleTypeRequest): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicleType(id: string, data: Partial<CreateVehicleTypeRequest>): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicleType(id: string): Promise<void> {\r\n  await apiCall(`/vehicle-types/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== VEHICLES ==============\r\nexport const vehicles = {\r\n  getAll: async (params?: { status?: string }): Promise<ApiResponse<Vehicle[]>> => {\r\n    const queryParams = params?.status ? `?status=${params.status}` : '';\r\n    return await apiCall<ApiResponse<Vehicle[]>>(`/vehicles${queryParams}`);\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  // Alias for getById for backward compatibility\r\n  getVehicleById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  createVehicle: async (data: CreateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicle: async (id: string, data: UpdateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicle: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicles/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleById(id: string): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicle(id: string): Promise<void> {\r\n  await apiCall(`/vehicles/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== REPORTS ==============\r\nexport async function reports(): Promise<Report[]> {\r\n  const response = await apiCall<ApiResponse<Report[]>>(\"/reports\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getReportById(id: string): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createReport(\r\n  data: CreateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(\"/reports\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateReport(\r\n  id: string,\r\n  data: UpdateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteReport(id: string): Promise<void> {\r\n  await apiCall(`/reports/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== ASSIGNMENTS ==============\r\nexport async function assignments(): Promise<Assignment[]> {\r\n  const response = await apiCall<ApiResponse<Assignment[]>>(\"/assignments\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getAssignmentById(id: string): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createAssignment(\r\n  data: CreateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\"/assignments\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateAssignment(\r\n  id: string,\r\n  data: UpdateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`,\r\n    {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteAssignment(id: string): Promise<void> {\r\n  await apiCall(`/assignments/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== DRIVER LOCATIONS ==============\r\nexport async function getDriverLocationsList(): Promise<DriverLocation[]> {\r\n  const response = await apiCall<ApiResponse<DriverLocation[]>>(\r\n    \"/driver-locations/all/active\"\r\n  );\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getDriverLocationById(id: string): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    `/driver-locations/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createDriverLocation(\r\n  data: CreateDriverLocationRequest\r\n): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    \"/driver-locations\",\r\n    {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\n// ============== ORGANIZED API OBJECTS ==============\r\n\r\n// Assignments API\r\nexport const assignmentsApi = {\r\n  getAll: assignments,\r\n  getById: getAssignmentById,\r\n  create: createAssignment,\r\n  update: updateAssignment,\r\n  delete: deleteAssignment,\r\n\r\n  // Driver-specific endpoints\r\n  getAssignmentsByDriver: async (driverId: string): Promise<ApiResponse<Assignment[]>> => {\r\n    return await apiCall<ApiResponse<Assignment[]>>(`/assignments/driver/${driverId}`);\r\n  },\r\n\r\n  updateDriverAssignment: async (\r\n    assignmentId: string,\r\n    data: { vehicle_id?: string; status?: string }\r\n  ): Promise<ApiResponse<Assignment>> => {\r\n    return await apiCall<ApiResponse<Assignment>>(`/assignments/${assignmentId}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Reports API\r\nexport const reportsApi = {\r\n  getAll: reports,\r\n  getById: getReportById,\r\n  create: createReport,\r\n  update: updateReport,\r\n  delete: deleteReport,\r\n\r\n  // Update report status\r\n  updateReportStatus: async (\r\n    reportId: string,\r\n    data: { status: string }\r\n  ): Promise<ApiResponse<Report>> => {\r\n    return await apiCall<ApiResponse<Report>>(`/reports/${reportId}/status`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Vehicles API\r\nexport const vehiclesApi = {\r\n  getAll: vehicles.getAll,\r\n  getById: vehicles.getById,\r\n  create: vehicles.createVehicle,\r\n  update: vehicles.updateVehicle,\r\n  delete: vehicles.deleteVehicle,\r\n};\r\n\r\n// Users API\r\nexport const users = {\r\n  getAll: async (params?: { role?: string }): Promise<User[]> => {\r\n    const queryParams = params?.role ? `?role=${params.role}` : '';\r\n    const response = await apiCall<ApiResponse<User[]>>(`/users${queryParams}`);\r\n    return response.data || [];\r\n  },\r\n  getUsers: async (params?: { role?: string }): Promise<ApiResponse<User[]>> => {\r\n    const queryParams = params?.role ? `?role=${params.role}` : '';\r\n    return await apiCall<ApiResponse<User[]>>(`/users${queryParams}`);\r\n  },\r\n  getById: getUserById,\r\n  update: updateUser,\r\n  createUser: async (data: { name: string; email: string; password: string; role: string }): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>('/users', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateUser: async (id: string, data: Partial<User>): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteUser: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/users/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  },\r\n};\r\n\r\nexport const usersApi = users;\r\n\r\n// Driver Locations API\r\nexport const driverLocations = {\r\n  getDriverLocations: async (): Promise<ApiResponse<DriverLocation[]>> => {\r\n    return await apiCall<ApiResponse<DriverLocation[]>>(\"/driver-locations/all/active\");\r\n  },\r\n  getAll: getDriverLocationsList,\r\n  getById: getDriverLocationById,\r\n  create: createDriverLocation,\r\n};\r\n\r\nexport const driverLocationsApi = driverLocations;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/forms/AssignmentForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { reportsApi, usersApi } from \"@/lib/api\";\r\nimport type { CreateAssignmentRequest } from \"@/lib/types\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst assignmentSchema = z.object({\r\n  report_id: z.string().min(1, \"Report is required\"),\r\n  driver_id: z.string().min(1, \"Driver is required\"),\r\n});\r\n\r\ntype AssignmentFormData = z.infer<typeof assignmentSchema>;\r\n\r\ninterface AssignmentFormProps {\r\n  initialReportId?: string;\r\n  onSubmit: (data: CreateAssignmentRequest) => void;\r\n  isSubmitting?: boolean;\r\n}\r\n\r\nexport default function AssignmentForm({\r\n  initialReportId,\r\n  onSubmit,\r\n  isSubmitting = false,\r\n}: AssignmentFormProps) {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    control,\r\n    setValue,\r\n  } = useForm<AssignmentFormData>({\r\n    resolver: zodResolver(assignmentSchema),\r\n    defaultValues: {\r\n      report_id: initialReportId || \"\",\r\n      driver_id: \"\",\r\n    },\r\n  });\r\n\r\n  // Set initial report ID when it changes\r\n  useEffect(() => {\r\n    if (initialReportId) {\r\n      setValue(\"report_id\", initialReportId);\r\n    }\r\n  }, [initialReportId, setValue]);\r\n\r\n  // Fetch pending reports (not yet assigned)\r\n  const { data: reportsData, isLoading: loadingReports } = useQuery({\r\n    queryKey: [\"reports\", { status_filter: \"pending\" }],\r\n    queryFn: () => reportsApi.getAll(),\r\n    staleTime: 0,\r\n    refetchInterval: 5 * 1000, // Auto-refetch every 5 seconds\r\n    refetchIntervalInBackground: true,\r\n  });\r\n\r\n  // Fetch drivers\r\n  const { data: driversData, isLoading: loadingDrivers } = useQuery({\r\n    queryKey: [\"users\", { role: \"driver\" }],\r\n    queryFn: () => usersApi.getAll({ role: \"driver\" }),\r\n    staleTime: 0,\r\n    refetchInterval: 10 * 1000, // Auto-refetch every 10 seconds\r\n    refetchIntervalInBackground: true,\r\n  });\r\n\r\n  // Filter for pending reports only\r\n  const allReports = reportsData || [];\r\n  const pendingReports = allReports.filter(report => report.status === \"pending\");\r\n  const driversList = driversData || [];\r\n\r\n  // Watch selected report ID\r\n  const selectedReportId = useWatch({\r\n    control,\r\n    name: \"report_id\",\r\n  });\r\n\r\n  const selectedReport = pendingReports.find((r) => r.id === selectedReportId);\r\n\r\n  const onFormSubmit = (data: AssignmentFormData) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onFormSubmit)} className=\"space-y-6\">\r\n      {/* Report Selection */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Select Report\r\n        </h2>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Pending Report <span className=\"text-red-600\">*</span>\r\n          </label>\r\n          {loadingReports ? (\r\n            <p className=\"text-gray-500 text-sm\">Loading reports...</p>\r\n          ) : pendingReports.length === 0 ? (\r\n            <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n              <p className=\"text-yellow-800 text-sm\">\r\n                No pending reports available. All reports have been assigned or\r\n                completed.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <select\r\n                {...register(\"report_id\")}\r\n                disabled={!!initialReportId}\r\n                className={`w-full px-4 py-2 border ${errors.report_id ? \"border-red-500\" : \"border-gray-300\"\r\n                  } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed`}\r\n              >\r\n                <option value=\"\">Select a report</option>\r\n                {pendingReports.map((report) => (\r\n                  <option key={report.id} value={report.id}>\r\n                    {report.requester_name} - {report.patient_name} (\r\n                    {report.pickup_address})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {errors.report_id && (\r\n                <p className=\"text-red-500 text-sm mt-1\">\r\n                  {errors.report_id.message}\r\n                </p>\r\n              )}\r\n              {initialReportId && (\r\n                <p className=\"text-sm text-gray-600 mt-2\">\r\n                  ℹ️ Report is pre-selected from previous page\r\n                </p>\r\n              )}\r\n\r\n              {/* Selected Report Details */}\r\n              {selectedReport && (\r\n                <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                  <h3 className=\"font-semibold text-blue-900 mb-2\">\r\n                    Report Details\r\n                  </h3>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-800\">\r\n                    <div>\r\n                      <p>\r\n                        <strong>Requester:</strong>{\" \"}\r\n                        {selectedReport.requester_name}\r\n                      </p>\r\n                      <p>\r\n                        <strong>Phone:</strong> {selectedReport.requester_phone}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <p>\r\n                        <strong>Patient:</strong> {selectedReport.patient_name}\r\n                      </p>\r\n                      <p>\r\n                        <strong>Age:</strong> {selectedReport.patient_age} years\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                      <p>\r\n                        <strong>Pickup:</strong> {selectedReport.pickup_address}\r\n                      </p>\r\n                      <p>\r\n                        <strong>Destination:</strong>{\" \"}\r\n                        {selectedReport.destination_address}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                      <p>\r\n                        <strong>Schedule:</strong>{\" \"}\r\n                        {selectedReport.schedule_date} at{\" \"}\r\n                        {selectedReport.schedule_time}\r\n                      </p>\r\n                    </div>\r\n                    {selectedReport.note && (\r\n                      <div className=\"md:col-span-2\">\r\n                        <p>\r\n                          <strong>Note:</strong> {selectedReport.note}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Driver Selection */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Select Driver\r\n        </h2>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Driver <span className=\"text-red-600\">*</span>\r\n          </label>\r\n          {loadingDrivers ? (\r\n            <p className=\"text-gray-500 text-sm\">Loading drivers...</p>\r\n          ) : driversList.length === 0 ? (\r\n            <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n              <p className=\"text-yellow-800 text-sm\">\r\n                No drivers available in the system.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <select\r\n                {...register(\"driver_id\")}\r\n                className={`w-full px-4 py-2 border ${errors.driver_id ? \"border-red-500\" : \"border-gray-300\"\r\n                  } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent`}\r\n              >\r\n                <option value=\"\">Select a driver</option>\r\n                {driversList.map((driver) => (\r\n                  <option key={driver.id} value={driver.id}>\r\n                    {driver.name} - {driver.email}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {errors.driver_id && (\r\n                <p className=\"text-red-500 text-sm mt-1\">\r\n                  {errors.driver_id.message}\r\n                </p>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Submit Button */}\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={\r\n            isSubmitting ||\r\n            pendingReports.length === 0 ||\r\n            driversList.length === 0\r\n          }\r\n          className=\"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          {isSubmitting ? \"Creating Assignment...\" : \"Create Assignment\"}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Warning if resources unavailable */}\r\n      {(pendingReports.length === 0 || driversList.length === 0) && (\r\n        <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n          <p className=\"text-yellow-800 text-sm font-medium\">\r\n            ⚠️ Cannot create assignment: Missing required resources\r\n          </p>\r\n          <ul className=\"mt-2 text-yellow-700 text-sm list-disc list-inside\">\r\n            {pendingReports.length === 0 && (\r\n              <li>No pending reports available</li>\r\n            )}\r\n            {driversList.length === 0 && <li>No drivers in system</li>}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAEA;;;AARA;;;;;;;AAUA,MAAM,mBAAmB,0KAAC,CAAC,MAAM,CAAC;IAChC,WAAW,0KAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC7B,WAAW,0KAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC/B;AAUe,SAAS,eAAe,EACrC,eAAe,EACf,QAAQ,EACR,eAAe,KAAK,EACA;;IACpB,MAAM,EACJ,QAAQ,EACR,YAAY,EACZ,WAAW,EAAE,MAAM,EAAE,EACrB,OAAO,EACP,QAAQ,EACT,GAAG,IAAA,4KAAO,EAAqB;QAC9B,UAAU,IAAA,gLAAW,EAAC;QACtB,eAAe;YACb,WAAW,mBAAmB;YAC9B,WAAW;QACb;IACF;IAEA,wCAAwC;IACxC,IAAA,0KAAS;oCAAC;YACR,IAAI,iBAAiB;gBACnB,SAAS,aAAa;YACxB;QACF;mCAAG;QAAC;QAAiB;KAAS;IAE9B,2CAA2C;IAC3C,MAAM,EAAE,MAAM,WAAW,EAAE,WAAW,cAAc,EAAE,GAAG,IAAA,0LAAQ,EAAC;QAChE,UAAU;YAAC;YAAW;gBAAE,eAAe;YAAU;SAAE;QACnD,OAAO;uCAAE,IAAM,kIAAU,CAAC,MAAM;;QAChC,WAAW;QACX,iBAAiB,IAAI;QACrB,6BAA6B;IAC/B;IAEA,gBAAgB;IAChB,MAAM,EAAE,MAAM,WAAW,EAAE,WAAW,cAAc,EAAE,GAAG,IAAA,0LAAQ,EAAC;QAChE,UAAU;YAAC;YAAS;gBAAE,MAAM;YAAS;SAAE;QACvC,OAAO;uCAAE,IAAM,gIAAQ,CAAC,MAAM,CAAC;oBAAE,MAAM;gBAAS;;QAChD,WAAW;QACX,iBAAiB,KAAK;QACtB,6BAA6B;IAC/B;IAEA,kCAAkC;IAClC,MAAM,aAAa,eAAe,EAAE;IACpC,MAAM,iBAAiB,WAAW,MAAM,CAAC,CAAA,SAAU,OAAO,MAAM,KAAK;IACrE,MAAM,cAAc,eAAe,EAAE;IAErC,2BAA2B;IAC3B,MAAM,mBAAmB,IAAA,6KAAQ,EAAC;QAChC;QACA,MAAM;IACR;IAEA,MAAM,iBAAiB,eAAe,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE3D,MAAM,eAAe,CAAC;QACpB,SAAS;IACX;IAEA,qBACE,6LAAC;QAAK,UAAU,aAAa;QAAe,WAAU;;0BAEpD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;;oCAA+C;kDAC/C,6LAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;4BAE/C,+BACC,6LAAC;gCAAE,WAAU;0CAAwB;;;;;uCACnC,eAAe,MAAM,KAAK,kBAC5B,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;8CAA0B;;;;;;;;;;qDAMzC;;kDACE,6LAAC;wCACE,GAAG,SAAS,YAAY;wCACzB,UAAU,CAAC,CAAC;wCACZ,WAAW,CAAC,wBAAwB,EAAE,OAAO,SAAS,GAAG,mBAAmB,kBACzE,qHAAqH,CAAC;;0DAEzH,6LAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,eAAe,GAAG,CAAC,CAAC,uBACnB,6LAAC;oDAAuB,OAAO,OAAO,EAAE;;wDACrC,OAAO,cAAc;wDAAC;wDAAI,OAAO,YAAY;wDAAC;wDAC9C,OAAO,cAAc;wDAAC;;mDAFZ,OAAO,EAAE;;;;;;;;;;;oCAMzB,OAAO,SAAS,kBACf,6LAAC;wCAAE,WAAU;kDACV,OAAO,SAAS,CAAC,OAAO;;;;;;oCAG5B,iCACC,6LAAC;wCAAE,WAAU;kDAA6B;;;;;;oCAM3C,gCACC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAmC;;;;;;0DAGjD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;;0EACC,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAoB;oEAC3B,eAAe,cAAc;;;;;;;0EAEhC,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAe;oEAAE,eAAe,eAAe;;;;;;;;;;;;;kEAG3D,6LAAC;;0EACC,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAiB;oEAAE,eAAe,YAAY;;;;;;;0EAExD,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAa;oEAAE,eAAe,WAAW;oEAAC;;;;;;;;;;;;;kEAGtD,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAgB;oEAAE,eAAe,cAAc;;;;;;;0EAEzD,6LAAC;;kFACC,6LAAC;kFAAO;;;;;;oEAAsB;oEAC7B,eAAe,mBAAmB;;;;;;;;;;;;;kEAGvC,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC;;8EACC,6LAAC;8EAAO;;;;;;gEAAmB;gEAC1B,eAAe,aAAa;gEAAC;gEAAI;gEACjC,eAAe,aAAa;;;;;;;;;;;;oDAGhC,eAAe,IAAI,kBAClB,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC;;8EACC,6LAAC;8EAAO;;;;;;gEAAc;gEAAE,eAAe,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAa/D,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;;oCAA+C;kDACvD,6LAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;4BAEvC,+BACC,6LAAC;gCAAE,WAAU;0CAAwB;;;;;uCACnC,YAAY,MAAM,KAAK,kBACzB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;8CAA0B;;;;;;;;;;qDAKzC;;kDACE,6LAAC;wCACE,GAAG,SAAS,YAAY;wCACzB,WAAW,CAAC,wBAAwB,EAAE,OAAO,SAAS,GAAG,mBAAmB,kBACzE,oEAAoE,CAAC;;0DAExE,6LAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,YAAY,GAAG,CAAC,CAAC,uBAChB,6LAAC;oDAAuB,OAAO,OAAO,EAAE;;wDACrC,OAAO,IAAI;wDAAC;wDAAI,OAAO,KAAK;;mDADlB,OAAO,EAAE;;;;;;;;;;;oCAKzB,OAAO,SAAS,kBACf,6LAAC;wCAAE,WAAU;kDACV,OAAO,SAAS,CAAC,OAAO;;;;;;;;;;;;;;;;;;;;0BASrC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,MAAK;oBACL,UACE,gBACA,eAAe,MAAM,KAAK,KAC1B,YAAY,MAAM,KAAK;oBAEzB,WAAU;8BAET,eAAe,2BAA2B;;;;;;;;;;;YAK9C,CAAC,eAAe,MAAM,KAAK,KAAK,YAAY,MAAM,KAAK,CAAC,mBACvD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAsC;;;;;;kCAGnD,6LAAC;wBAAG,WAAU;;4BACX,eAAe,MAAM,KAAK,mBACzB,6LAAC;0CAAG;;;;;;4BAEL,YAAY,MAAM,KAAK,mBAAK,6LAAC;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAM7C;GA3OwB;;QAWlB,4KAAO;QAgB8C,0LAAQ;QASR,0LAAQ;QAcxC,6KAAQ;;;KAlDX"}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/app/dashboard/assignments/create/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { assignmentsApi } from \"@/lib/api\";\r\nimport { toast } from \"sonner\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport AssignmentForm from \"@/components/forms/AssignmentForm\";\r\nimport type { CreateAssignmentRequest } from \"@/lib/types\";\r\nimport { Suspense } from \"react\";\r\n\r\nfunction CreateAssignmentContent() {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const searchParams = useSearchParams();\r\n  const reportId = searchParams.get(\"report_id\");\r\n\r\n  const createAssignmentMutation = useMutation({\r\n    mutationFn: (data: CreateAssignmentRequest) =>\r\n      assignmentsApi.create(data),\r\n    onSuccess: (response) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"assignments\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"reports\"] });\r\n      toast.success(\"Assignment created successfully\");\r\n      router.push(`/dashboard/assignments/${response.id}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      const axiosError = error as { response?: { data?: { detail?: string } } };\r\n      toast.error(\r\n        axiosError?.response?.data?.detail || \"Failed to create assignment\"\r\n      );\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (data: CreateAssignmentRequest) => {\r\n    createAssignmentMutation.mutate(data);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 max-w-4xl\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n        >\r\n          <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\r\n        </button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">\r\n            Create Assignment\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Assign a vehicle and driver to an emergency report\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Info Banner */}\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h3 className=\"font-semibold text-blue-900 mb-2\">How it works:</h3>\r\n        <ol className=\"list-decimal list-inside space-y-1 text-sm text-blue-800\">\r\n          <li>Select a pending report that needs attention</li>\r\n          <li>Choose an available vehicle from the fleet</li>\r\n          <li>Assign a driver to handle the emergency</li>\r\n          <li>The assignment will be created and the driver notified</li>\r\n        </ol>\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <AssignmentForm\r\n        initialReportId={reportId || undefined}\r\n        onSubmit={handleSubmit}\r\n        isSubmitting={createAssignmentMutation.isPending}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function CreateAssignmentPage() {\r\n  return (\r\n    <Suspense fallback={<div>Loading...</div>}>\r\n      <CreateAssignmentContent />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AATA;;;;;;;;AAWA,SAAS;;IACP,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,cAAc,IAAA,2MAAc;IAClC,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,MAAM,2BAA2B,IAAA,gMAAW,EAAC;QAC3C,UAAU;6EAAE,CAAC,OACX,sIAAc,CAAC,MAAM,CAAC;;QACxB,SAAS;6EAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAc;gBAAC;gBAC1D,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAU;gBAAC;gBACtD,oJAAK,CAAC,OAAO,CAAC;gBACd,OAAO,IAAI,CAAC,CAAC,uBAAuB,EAAE,SAAS,EAAE,EAAE;YACrD;;QACA,OAAO;6EAAE,CAAC;gBACR,MAAM,aAAa;gBACnB,oJAAK,CAAC,KAAK,CACT,YAAY,UAAU,MAAM,UAAU;YAE1C;;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,yBAAyB,MAAM,CAAC;IAClC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI;wBAC1B,WAAU;kCAEV,cAAA,6LAAC,gOAAS;4BAAC,WAAU;;;;;;;;;;;kCAEvB,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CAGjD,6LAAC;gCAAE,WAAU;0CAAqB;;;;;;;;;;;;;;;;;;0BAOtC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;0CAAG;;;;;;;;;;;;;;;;;;0BAKR,6LAAC,2JAAc;gBACb,iBAAiB,YAAY;gBAC7B,UAAU;gBACV,cAAc,yBAAyB,SAAS;;;;;;;;;;;;AAIxD;GAlES;;QACQ,kJAAS;QACJ,2MAAc;QACb,wJAAe;QAGH,gMAAW;;;KANrC;AAoEM,SAAS;IACtB,qBACE,6LAAC,yKAAQ;QAAC,wBAAU,6LAAC;sBAAI;;;;;;kBACvB,cAAA,6LAAC;;;;;;;;;;AAGP;MANwB"}}]
}