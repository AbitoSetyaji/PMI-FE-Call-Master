{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/api.ts"],"sourcesContent":["import type {\r\n  User,\r\n  Vehicle,\r\n  VehicleType,\r\n  Report,\r\n  Assignment,\r\n  DriverLocation,\r\n  CreateVehicleTypeRequest,\r\n  CreateVehicleRequest,\r\n  UpdateVehicleRequest,\r\n  CreateReportRequest,\r\n  UpdateReportRequest,\r\n  CreateAssignmentRequest,\r\n  UpdateAssignmentRequest,\r\n  CreateDriverLocationRequest,\r\n  ApiResponse,\r\n  PaginatedResponse,\r\n} from \"./types\";\r\n\r\nconst API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\";\r\n\r\n// Helper function for API calls\r\nasync function apiCall<T>(\r\n  endpoint: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"pmi_auth_token\") : null;\r\n\r\n  const headers = new Headers(options.headers);\r\n  headers.set(\"Content-Type\", \"application/json\");\r\n\r\n  if (token) {\r\n    headers.set(\"Authorization\", `Bearer ${token}`);\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json();\r\n    throw new Error(error.message || `API Error: ${response.status}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n// ============== USERS (helper functions) ==============\r\n\r\nexport async function getUserById(id: string): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateUser(\r\n  id: string,\r\n  data: Partial<User>\r\n): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\n// ============== VEHICLE TYPES ==============\r\nexport const vehicleTypes = {\r\n  getVehicleTypes: async (): Promise<ApiResponse<VehicleType[]>> => {\r\n    return await apiCall<ApiResponse<VehicleType[]>>(\"/vehicle-types\");\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  },\r\n  createVehicleType: async (data: CreateVehicleTypeRequest): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicleType: async (id: string, data: Partial<CreateVehicleTypeRequest>): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicleType: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicle-types/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\nexport const vehicleTypesApi = vehicleTypes;\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleTypeById(id: string): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicleType(data: CreateVehicleTypeRequest): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicleType(id: string, data: Partial<CreateVehicleTypeRequest>): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicleType(id: string): Promise<void> {\r\n  await apiCall(`/vehicle-types/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== VEHICLES ==============\r\nexport const vehicles = {\r\n  getAll: async (params?: { status?: string }): Promise<ApiResponse<Vehicle[]>> => {\r\n    const queryParams = params?.status ? `?status=${params.status}` : '';\r\n    return await apiCall<ApiResponse<Vehicle[]>>(`/vehicles${queryParams}`);\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  // Alias for getById for backward compatibility\r\n  getVehicleById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  createVehicle: async (data: CreateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicle: async (id: string, data: UpdateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicle: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicles/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleById(id: string): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicle(id: string): Promise<void> {\r\n  await apiCall(`/vehicles/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== REPORTS ==============\r\nexport async function reports(): Promise<Report[]> {\r\n  const response = await apiCall<ApiResponse<Report[]>>(\"/reports\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getReportById(id: string): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createReport(\r\n  data: CreateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(\"/reports\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateReport(\r\n  id: string,\r\n  data: UpdateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteReport(id: string): Promise<void> {\r\n  await apiCall(`/reports/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== ASSIGNMENTS ==============\r\nexport async function assignments(): Promise<Assignment[]> {\r\n  const response = await apiCall<ApiResponse<Assignment[]>>(\"/assignments\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getAssignmentById(id: string): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createAssignment(\r\n  data: CreateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\"/assignments\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateAssignment(\r\n  id: string,\r\n  data: UpdateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`,\r\n    {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteAssignment(id: string): Promise<void> {\r\n  await apiCall(`/assignments/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== DRIVER LOCATIONS ==============\r\nexport async function driverLocations(): Promise<DriverLocation[]> {\r\n  const response = await apiCall<ApiResponse<DriverLocation[]>>(\r\n    \"/driver-locations\"\r\n  );\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getDriverLocationById(id: string): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    `/driver-locations/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createDriverLocation(\r\n  data: CreateDriverLocationRequest\r\n): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    \"/driver-locations\",\r\n    {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\n// ============== ORGANIZED API OBJECTS ==============\r\n\r\n// Assignments API\r\nexport const assignmentsApi = {\r\n  getAll: assignments,\r\n  getById: getAssignmentById,\r\n  create: createAssignment,\r\n  update: updateAssignment,\r\n  delete: deleteAssignment,\r\n\r\n  // Driver-specific endpoints\r\n  getAssignmentsByDriver: async (driverId: string): Promise<ApiResponse<Assignment[]>> => {\r\n    return await apiCall<ApiResponse<Assignment[]>>(`/assignments/driver/${driverId}`);\r\n  },\r\n\r\n  updateDriverAssignment: async (\r\n    assignmentId: string,\r\n    data: { vehicle_id?: string; status?: string }\r\n  ): Promise<ApiResponse<Assignment>> => {\r\n    return await apiCall<ApiResponse<Assignment>>(`/assignments/${assignmentId}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Reports API\r\nexport const reportsApi = {\r\n  getAll: reports,\r\n  getById: getReportById,\r\n  create: createReport,\r\n  update: updateReport,\r\n  delete: deleteReport,\r\n\r\n  // Update report status\r\n  updateReportStatus: async (\r\n    reportId: string,\r\n    data: { status: string }\r\n  ): Promise<ApiResponse<Report>> => {\r\n    return await apiCall<ApiResponse<Report>>(`/reports/${reportId}/status`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Vehicles API\r\nexport const vehiclesApi = {\r\n  getAll: vehicles.getAll,\r\n  getById: vehicles.getById,\r\n  create: vehicles.createVehicle,\r\n  update: vehicles.updateVehicle,\r\n  delete: vehicles.deleteVehicle,\r\n};\r\n\r\n// Users API\r\nexport const users = {\r\n  getUsers: async (params?: { role?: string }): Promise<ApiResponse<User[]>> => {\r\n    const queryParams = params?.role ? `?role=${params.role}` : '';\r\n    return await apiCall<ApiResponse<User[]>>(`/users${queryParams}`);\r\n  },\r\n  getById: getUserById,\r\n  update: updateUser,\r\n  createUser: async (data: { name: string; email: string; password: string; role: string }): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>('/users', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateUser: async (id: string, data: Partial<User>): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteUser: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/users/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  },\r\n};\r\n\r\nexport const usersApi = users;\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/hooks/useReports.ts"],"sourcesContent":["/**\r\n * useReports Hook\r\n * Custom hook for managing emergency reports\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { reportsApi } from \"@/lib/api\";\r\nimport type { Report, CreateReportRequest, UpdateReportRequest } from \"@/lib/types\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport function useReports() {\r\n    const queryClient = useQueryClient();\r\n\r\n    // Get all reports\r\n    const { data: reports = [], isLoading, error, refetch } = useQuery<Report[]>({\r\n        queryKey: [\"reports\"],\r\n        queryFn: reportsApi.getAll,\r\n    });\r\n\r\n    // Get report by ID\r\n    const useReportById = (id: string) => {\r\n        return useQuery<Report>({\r\n            queryKey: [\"reports\", id],\r\n            queryFn: () => reportsApi.getById(id),\r\n            enabled: !!id,\r\n        });\r\n    };\r\n\r\n    // Create report mutation\r\n    const createMutation = useMutation({\r\n        mutationFn: (data: CreateReportRequest) => reportsApi.create(data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"reports\"] });\r\n            toast.success(\"Laporan berhasil dibuat\");\r\n        },\r\n        onError: (error: any) => {\r\n            toast.error(error.message || \"Gagal membuat laporan\");\r\n        },\r\n    });\r\n\r\n    // Update report mutation\r\n    const updateMutation = useMutation({\r\n        mutationFn: ({ id, data }: { id: string; data: UpdateReportRequest }) =>\r\n            reportsApi.update(id, data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"reports\"] });\r\n            toast.success(\"Laporan berhasil diupdate\");\r\n        },\r\n        onError: (error: any) => {\r\n            toast.error(error.message || \"Gagal mengupdate laporan\");\r\n        },\r\n    });\r\n\r\n    // Delete report mutation\r\n    const deleteMutation = useMutation({\r\n        mutationFn: (id: string) => reportsApi.delete(id),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"reports\"] });\r\n            toast.success(\"Laporan berhasil dihapus\");\r\n        },\r\n        onError: (error: any) => {\r\n            toast.error(error.message || \"Gagal menghapus laporan\");\r\n        },\r\n    });\r\n\r\n    // Update report status mutation\r\n    const updateStatusMutation = useMutation({\r\n        mutationFn: ({ id, status }: { id: string; status: string }) =>\r\n            reportsApi.updateReportStatus(id, { status }),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"reports\"] });\r\n            toast.success(\"Status laporan berhasil diupdate\");\r\n        },\r\n        onError: (error: any) => {\r\n            toast.error(error.message || \"Gagal mengupdate status\");\r\n        },\r\n    });\r\n\r\n    return {\r\n        reports,\r\n        isLoading,\r\n        error,\r\n        refetch,\r\n        useReportById,\r\n        createReport: createMutation.mutate,\r\n        updateReport: updateMutation.mutate,\r\n        deleteReport: deleteMutation.mutate,\r\n        updateStatus: updateStatusMutation.mutate,\r\n        isCreating: createMutation.isPending,\r\n        isUpdating: updateMutation.isPending,\r\n        isDeleting: deleteMutation.isPending,\r\n    };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAED;AAAA;AAAA;AACA;AAEA;;;;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,wMAAc;IAElC,kBAAkB;IAClB,MAAM,EAAE,MAAM,UAAU,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAA,uLAAQ,EAAW;QACzE,UAAU;YAAC;SAAU;QACrB,SAAS,+HAAU,CAAC,MAAM;IAC9B;IAEA,mBAAmB;IACnB,MAAM,gBAAgB,CAAC;QACnB,OAAO,IAAA,uLAAQ,EAAS;YACpB,UAAU;gBAAC;gBAAW;aAAG;YACzB,SAAS,IAAM,+HAAU,CAAC,OAAO,CAAC;YAClC,SAAS,CAAC,CAAC;QACf;IACJ;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,OAA8B,+HAAU,CAAC,MAAM,CAAC;QAC7D,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,EAAE,EAAE,EAAE,IAAI,EAA6C,GAChE,+HAAU,CAAC,MAAM,CAAC,IAAI;QAC1B,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,KAAe,+HAAU,CAAC,MAAM,CAAC;QAC9C,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;IAEA,gCAAgC;IAChC,MAAM,uBAAuB,IAAA,6LAAW,EAAC;QACrC,YAAY,CAAC,EAAE,EAAE,EAAE,MAAM,EAAkC,GACvD,+HAAU,CAAC,kBAAkB,CAAC,IAAI;gBAAE;YAAO;QAC/C,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA,cAAc,eAAe,MAAM;QACnC,cAAc,eAAe,MAAM;QACnC,cAAc,eAAe,MAAM;QACnC,cAAc,qBAAqB,MAAM;QACzC,YAAY,eAAe,SAAS;QACpC,YAAY,eAAe,SAAS;QACpC,YAAY,eAAe,SAAS;IACxC;AACJ"}},
    {"offset": {"line": 452, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/Input.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = React.InputHTMLAttributes<HTMLInputElement> & {\r\n  label?: string;\r\n  error?: string | null;\r\n};\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, Props>(function Input(\r\n  { label, error = null, className = \"\", id, ...rest },\r\n  ref\r\n) {\r\n  const inputId = id || `input-${label?.toLowerCase().replace(/\\s+/g, \"-\")}`;\r\n  const errorId = error ? `${inputId}-error` : undefined;\r\n\r\n  return (\r\n    <div className=\"mb-4\">\r\n      {label && (\r\n        <label\r\n          htmlFor={inputId}\r\n          className=\"block text-sm font-medium mb-1 text-gray-700\"\r\n        >\r\n          {label}\r\n        </label>\r\n      )}\r\n      <input\r\n        ref={ref}\r\n        id={inputId}\r\n        aria-invalid={error ? \"true\" : \"false\"}\r\n        aria-describedby={errorId}\r\n        className={`w-full rounded-md border px-3 py-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-pmi-red focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed ${\r\n          error\r\n            ? \"border-red-400 focus:ring-red-500\"\r\n            : \"border-gray-300 hover:border-gray-400\"\r\n        } ${className}`}\r\n        {...rest}\r\n      />\r\n      {error && (\r\n        <p id={errorId} className=\"text-sm text-red-600 mt-1\" role=\"alert\">\r\n          {error}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Input;\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAQA,MAAM,sBAAQ,gNAAK,CAAC,UAAU,CAA0B,SAAS,MAC/D,EAAE,KAAK,EAAE,QAAQ,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE,EAAE,GAAG,MAAM,EACpD,GAAG;IAEH,MAAM,UAAU,MAAM,CAAC,MAAM,EAAE,OAAO,cAAc,QAAQ,QAAQ,MAAM;IAC1E,MAAM,UAAU,QAAQ,GAAG,QAAQ,MAAM,CAAC,GAAG;IAE7C,qBACE,8OAAC;QAAI,WAAU;;YACZ,uBACC,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAET;;;;;;0BAGL,8OAAC;gBACC,KAAK;gBACL,IAAI;gBACJ,gBAAc,QAAQ,SAAS;gBAC/B,oBAAkB;gBAClB,WAAW,CAAC,kNAAkN,EAC5N,QACI,sCACA,wCACL,CAAC,EAAE,WAAW;gBACd,GAAG,IAAI;;;;;;YAET,uBACC,8OAAC;gBAAE,IAAI;gBAAS,WAAU;gBAA4B,MAAK;0BACxD;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/hooks/useVehicles.ts"],"sourcesContent":["/**\r\n * useVehicles Hook\r\n * Custom hooks for vehicle and vehicle type data fetching using React Query\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { vehicleTypes } from \"@/lib/api\";\r\nimport type { VehicleType, ApiResponse } from \"@/lib/types\";\r\n\r\n/**\r\n * Hook to fetch all vehicle types\r\n */\r\nexport function useVehicleTypes() {\r\n    return useQuery<ApiResponse<VehicleType[]>>({\r\n        queryKey: [\"vehicleTypes\"],\r\n        queryFn: async () => {\r\n            const data = await vehicleTypes();\r\n            // Wrap the data in the expected ApiResponse format\r\n            return {\r\n                status: \"success\" as const,\r\n                message: \"Vehicle types fetched successfully\",\r\n                data: data,\r\n            };\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Hook to fetch a single vehicle type by ID\r\n */\r\nexport function useVehicleType(id: string) {\r\n    return useQuery<VehicleType>({\r\n        queryKey: [\"vehicleType\", id],\r\n        queryFn: async () => {\r\n            const response = await fetch(\r\n                `${process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\"}/vehicle-types/${id}`,\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem(\"pmi_auth_token\")}`,\r\n                    },\r\n                }\r\n            );\r\n            if (!response.ok) throw new Error(\"Failed to fetch vehicle type\");\r\n            const result = await response.json();\r\n            return result.data;\r\n        },\r\n        enabled: !!id,\r\n    });\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAID;AACA;AAHA;;;AASO,SAAS;IACZ,OAAO,IAAA,uLAAQ,EAA6B;QACxC,UAAU;YAAC;SAAe;QAC1B,SAAS;YACL,MAAM,OAAO,MAAM,IAAA,iIAAY;YAC/B,mDAAmD;YACnD,OAAO;gBACH,QAAQ;gBACR,SAAS;gBACT,MAAM;YACV;QACJ;IACJ;AACJ;AAKO,SAAS,eAAe,EAAU;IACrC,OAAO,IAAA,uLAAQ,EAAc;QACzB,UAAU;YAAC;YAAe;SAAG;QAC7B,SAAS;YACL,MAAM,WAAW,MAAM,MACnB,GAAG,QAAQ,GAAG,CAAC,mBAAmB,IAAI,4BAA4B,eAAe,EAAE,IAAI,EACvF;gBACI,SAAS;oBACL,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,mBAAmB;gBACrE;YACJ;YAEJ,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAClC,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,OAAO,OAAO,IAAI;QACtB;QACA,SAAS,CAAC,CAAC;IACf;AACJ"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/forms/ReportForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport Input from \"@/components/Input\";\r\nimport { useVehicleTypes } from \"@/hooks/useVehicles\";\r\nimport type { CreateReportRequest } from \"@/lib/types\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst reportSchema = z.object({\r\n  // Requester Information\r\n  requester_name: z.string().min(1, \"Requester name is required\").max(255),\r\n  requester_phone: z.string().min(1, \"Phone number is required\").max(20),\r\n\r\n  // Transport Type\r\n  transport_type: z.string().min(1, \"Transport type is required\"),\r\n  use_stretcher: z.boolean().default(false),\r\n\r\n  // Patient Information\r\n  patient_name: z.string().min(1, \"Patient name is required\").max(255),\r\n  patient_gender: z.enum([\"male\", \"female\"], {\r\n    errorMap: () => ({ message: \"Please select a gender\" }),\r\n  }),\r\n  patient_age: z\r\n    .number()\r\n    .int()\r\n    .min(0, \"Age must be at least 0\")\r\n    .max(150, \"Age must be less than 150\"),\r\n  patient_history: z.string().optional().nullable(),\r\n\r\n  // Pickup & Destination\r\n  pickup_address: z.string().min(1, \"Pickup address is required\"),\r\n  destination_address: z.string().min(1, \"Destination address is required\"),\r\n  schedule_date: z.string().min(1, \"Schedule date is required\"),\r\n  schedule_time: z.string().min(1, \"Schedule time is required\"),\r\n\r\n  // Contact Person\r\n  contact_person_name: z\r\n    .string()\r\n    .min(1, \"Contact person name is required\")\r\n    .max(255),\r\n  contact_person_phone: z\r\n    .string()\r\n    .min(1, \"Contact person phone is required\")\r\n    .max(20),\r\n\r\n  // Additional Info\r\n  note: z.string().optional().nullable(),\r\n  attachment_ktp: z.string().optional().nullable(),\r\n  attachment_house_photo: z.string().optional().nullable(),\r\n  attachment_sharelok: z.string().optional().nullable(),\r\n});\r\n\r\ntype ReportFormData = z.infer<typeof reportSchema>;\r\n\r\ninterface ReportFormProps {\r\n  initialData?: Partial<CreateReportRequest>;\r\n  onSubmit: (data: CreateReportRequest) => void;\r\n  isSubmitting?: boolean;\r\n  submitButtonText?: string;\r\n}\r\n\r\nexport default function ReportForm({\r\n  initialData,\r\n  onSubmit,\r\n  isSubmitting = false,\r\n  submitButtonText = \"Submit Request\",\r\n}: ReportFormProps) {\r\n  // Fetch vehicle types\r\n  const { data: vehicleTypesData, isLoading: isLoadingVehicleTypes } =\r\n    useVehicleTypes();\r\n  const vehicleTypes = vehicleTypesData?.data || [];\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    setValue,\r\n    formState: { errors },\r\n  } = useForm<ReportFormData>({\r\n    resolver: zodResolver(reportSchema),\r\n    defaultValues: {\r\n      requester_name: initialData?.requester_name || \"\",\r\n      requester_phone: initialData?.requester_phone || \"\",\r\n      transport_type: initialData?.transport_type || \"\",\r\n      use_stretcher: initialData?.use_stretcher || false,\r\n      patient_name: initialData?.patient_name || \"\",\r\n      patient_gender:\r\n        (initialData?.patient_gender as \"male\" | \"female\") || \"male\",\r\n      patient_age: initialData?.patient_age || 0,\r\n      patient_history: initialData?.patient_history || \"\",\r\n      pickup_address: initialData?.pickup_address || \"\",\r\n      destination_address: initialData?.destination_address || \"\",\r\n      schedule_date: initialData?.schedule_date || \"\",\r\n      schedule_time: initialData?.schedule_time || \"\",\r\n      contact_person_name: initialData?.contact_person_name || \"\",\r\n      contact_person_phone: initialData?.contact_person_phone || \"\",\r\n      note: initialData?.note || \"\",\r\n      attachment_ktp: initialData?.attachment_ktp || \"\",\r\n      attachment_house_photo: initialData?.attachment_house_photo || \"\",\r\n      attachment_sharelok: initialData?.attachment_sharelok || \"\",\r\n    },\r\n  });\r\n\r\n  // Watch transport_type to show/hide stretcher checkbox\r\n  const selectedTransportType = watch(\"transport_type\");\r\n  \r\n  // Find the selected vehicle type to check if it's mortuary transport\r\n  const selectedVehicleType = vehicleTypes.find(\r\n    (type) => type.id === selectedTransportType\r\n  );\r\n  const isMortuaryTransport = selectedVehicleType?.name === \"mortuary_transport\";\r\n  \r\n  // Reset use_stretcher when switching away from mortuary transport\r\n  const handleTransportTypeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const newValue = e.target.value;\r\n    const newVehicleType = vehicleTypes.find((type) => type.id === newValue);\r\n    \r\n    // If not mortuary transport, set use_stretcher to false\r\n    if (newVehicleType?.name !== \"mortuary_transport\") {\r\n      setValue(\"use_stretcher\", false);\r\n    }\r\n  };\r\n\r\n  const onFormSubmit = (data: ReportFormData) => {\r\n    const submitData: CreateReportRequest = {\r\n      requester_name: data.requester_name,\r\n      requester_phone: data.requester_phone,\r\n      transport_type: data.transport_type,\r\n      use_stretcher: data.use_stretcher,\r\n      patient_name: data.patient_name,\r\n      patient_gender: data.patient_gender,\r\n      patient_age: data.patient_age,\r\n      patient_history: data.patient_history || undefined,\r\n      pickup_address: data.pickup_address,\r\n      destination_address: data.destination_address,\r\n      schedule_date: data.schedule_date,\r\n      schedule_time: data.schedule_time,\r\n      contact_person_name: data.contact_person_name,\r\n      contact_person_phone: data.contact_person_phone,\r\n      note: data.note || undefined,\r\n      attachment_ktp: data.attachment_ktp || undefined,\r\n      attachment_house_photo: data.attachment_house_photo || undefined,\r\n      attachment_sharelok: data.attachment_sharelok || undefined,\r\n    };\r\n    onSubmit(submitData);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onFormSubmit)} className=\"space-y-6\">\r\n      {/* Requester Information */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Requester Information\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Requester Name <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <Input\r\n              {...register(\"requester_name\")}\r\n              placeholder=\"Enter requester name\"\r\n              error={errors.requester_name?.message}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Phone Number <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <Input\r\n              {...register(\"requester_phone\")}\r\n              type=\"tel\"\r\n              placeholder=\"+62xxxxxxxxxx\"\r\n              error={errors.requester_phone?.message}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transport Type */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Transport Information\r\n        </h2>\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Transport Type <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <select\r\n              {...register(\"transport_type\", {\r\n                onChange: handleTransportTypeChange,\r\n              })}\r\n              disabled={isLoadingVehicleTypes}\r\n              className={`w-full px-4 py-2 border ${\r\n                errors.transport_type ? \"border-red-500\" : \"border-gray-300\"\r\n              } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed`}\r\n            >\r\n              <option value=\"\">\r\n                {isLoadingVehicleTypes ? \"Loading...\" : \"Select transport type\"}\r\n              </option>\r\n              {vehicleTypes.map((type) => (\r\n                <option key={type.id} value={type.id}>\r\n                  {type.name\r\n                    .replace(/_/g, \" \")\r\n                    .replace(/\\b\\w/g, (l) => l.toUpperCase())}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {errors.transport_type && (\r\n              <p className=\"text-red-500 text-sm mt-1\">\r\n                {errors.transport_type.message}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Only show checkbox for mortuary transport */}\r\n          {isMortuaryTransport && (\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  {...register(\"use_stretcher\")}\r\n                  type=\"checkbox\"\r\n                  id=\"use_stretcher\"\r\n                  className=\"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500\"\r\n                />\r\n                <label\r\n                  htmlFor=\"use_stretcher\"\r\n                  className=\"ml-2 block text-sm text-gray-700\"\r\n                >\r\n                  Requires Coffin/Keranda\r\n                </label>\r\n              </div>\r\n              <div className=\"text-yellow-700 bg-yellow-100 border border-yellow-300 rounded px-3 py-2 text-sm\">\r\n                ‚ö†Ô∏è Perhatian: Centang opsi ini jika membutuhkan layanan dengan keranda/peti jenazah. Pastikan informasi yang diberikan sudah benar.\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Patient Information */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Patient Information\r\n        </h2>\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Patient Name <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <Input\r\n              {...register(\"patient_name\")}\r\n              placeholder=\"Enter patient name\"\r\n              error={errors.patient_name?.message}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Gender <span className=\"text-red-600\">*</span>\r\n              </label>\r\n              <select\r\n                {...register(\"patient_gender\")}\r\n                className={`w-full px-4 py-2 border ${\r\n                  errors.patient_gender ? \"border-red-500\" : \"border-gray-300\"\r\n                } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent`}\r\n              >\r\n                <option value=\"male\">Male</option>\r\n                <option value=\"female\">Female</option>\r\n              </select>\r\n              {errors.patient_gender && (\r\n                <p className=\"text-red-500 text-sm mt-1\">\r\n                  {errors.patient_gender.message}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Age <span className=\"text-red-600\">*</span>\r\n              </label>\r\n              <Input\r\n                {...register(\"patient_age\", { valueAsNumber: true })}\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"150\"\r\n                placeholder=\"Enter patient age\"\r\n                error={errors.patient_age?.message}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Medical History (Optional)\r\n            </label>\r\n            <textarea\r\n              {...register(\"patient_history\")}\r\n              rows={3}\r\n              placeholder=\"Enter relevant medical history...\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pickup & Destination */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Pickup & Destination\r\n        </h2>\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Pickup Address <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <textarea\r\n              {...register(\"pickup_address\")}\r\n              rows={2}\r\n              placeholder=\"Enter pickup address\"\r\n              className={`w-full px-4 py-2 border ${\r\n                errors.pickup_address ? \"border-red-500\" : \"border-gray-300\"\r\n              } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent`}\r\n            />\r\n            {errors.pickup_address && (\r\n              <p className=\"text-red-500 text-sm mt-1\">\r\n                {errors.pickup_address.message}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Destination Address <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <textarea\r\n              {...register(\"destination_address\")}\r\n              rows={2}\r\n              placeholder=\"Enter destination address\"\r\n              className={`w-full px-4 py-2 border ${\r\n                errors.destination_address\r\n                  ? \"border-red-500\"\r\n                  : \"border-gray-300\"\r\n              } rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent`}\r\n            />\r\n            {errors.destination_address && (\r\n              <p className=\"text-red-500 text-sm mt-1\">\r\n                {errors.destination_address.message}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Schedule Date <span className=\"text-red-600\">*</span>\r\n              </label>\r\n              <Input\r\n                {...register(\"schedule_date\")}\r\n                type=\"date\"\r\n                error={errors.schedule_date?.message}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Schedule Time <span className=\"text-red-600\">*</span>\r\n              </label>\r\n              <Input\r\n                {...register(\"schedule_time\")}\r\n                type=\"time\"\r\n                error={errors.schedule_time?.message}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contact Person */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Contact Person\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Contact Person Name <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <Input\r\n              {...register(\"contact_person_name\")}\r\n              placeholder=\"Enter contact person name\"\r\n              error={errors.contact_person_name?.message}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Contact Person Phone <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <Input\r\n              {...register(\"contact_person_phone\")}\r\n              type=\"tel\"\r\n              placeholder=\"+62xxxxxxxxxx\"\r\n              error={errors.contact_person_phone?.message}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Additional Information */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n          Additional Information\r\n        </h2>\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Note (Optional)\r\n            </label>\r\n            <textarea\r\n              {...register(\"note\")}\r\n              rows={3}\r\n              placeholder=\"Enter any additional notes...\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                KTP Attachment (Optional)\r\n              </label>\r\n              <Input\r\n                {...register(\"attachment_ktp\")}\r\n                type=\"text\"\r\n                placeholder=\"KTP URL or file path\"\r\n                error={errors.attachment_ktp?.message}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                House Photo (Optional)\r\n              </label>\r\n              <Input\r\n                {...register(\"attachment_house_photo\")}\r\n                type=\"text\"\r\n                placeholder=\"Photo URL or file path\"\r\n                error={errors.attachment_house_photo?.message}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Share Location (Optional)\r\n              </label>\r\n              <Input\r\n                {...register(\"attachment_sharelok\")}\r\n                type=\"text\"\r\n                placeholder=\"Location link\"\r\n                error={errors.attachment_sharelok?.message}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"text-sm text-gray-500\">\r\n            üí° Tip: Attachments help us verify and process your request faster\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Submit Button */}\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSubmitting}\r\n          className=\"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          {isSubmitting ? \"Saving...\" : submitButtonText}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAUA,MAAM,eAAe,uKAAC,CAAC,MAAM,CAAC;IAC5B,wBAAwB;IACxB,gBAAgB,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,8BAA8B,GAAG,CAAC;IACpE,iBAAiB,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,4BAA4B,GAAG,CAAC;IAEnE,iBAAiB;IACjB,gBAAgB,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAClC,eAAe,uKAAC,CAAC,OAAO,GAAG,OAAO,CAAC;IAEnC,sBAAsB;IACtB,cAAc,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,4BAA4B,GAAG,CAAC;IAChE,gBAAgB,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;KAAS,EAAE;QACzC,UAAU,IAAM,CAAC;gBAAE,SAAS;YAAyB,CAAC;IACxD;IACA,aAAa,uKAAC,CACX,MAAM,GACN,GAAG,GACH,GAAG,CAAC,GAAG,0BACP,GAAG,CAAC,KAAK;IACZ,iBAAiB,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAE/C,uBAAuB;IACvB,gBAAgB,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAClC,qBAAqB,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACvC,eAAe,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACjC,eAAe,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAEjC,iBAAiB;IACjB,qBAAqB,uKAAC,CACnB,MAAM,GACN,GAAG,CAAC,GAAG,mCACP,GAAG,CAAC;IACP,sBAAsB,uKAAC,CACpB,MAAM,GACN,GAAG,CAAC,GAAG,oCACP,GAAG,CAAC;IAEP,kBAAkB;IAClB,MAAM,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACpC,gBAAgB,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAC9C,wBAAwB,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACtD,qBAAqB,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;AACrD;AAWe,SAAS,WAAW,EACjC,WAAW,EACX,QAAQ,EACR,eAAe,KAAK,EACpB,mBAAmB,gBAAgB,EACnB;IAChB,sBAAsB;IACtB,MAAM,EAAE,MAAM,gBAAgB,EAAE,WAAW,qBAAqB,EAAE,GAChE,IAAA,8IAAe;IACjB,MAAM,eAAe,kBAAkB,QAAQ,EAAE;IAEjD,MAAM,EACJ,QAAQ,EACR,YAAY,EACZ,KAAK,EACL,QAAQ,EACR,WAAW,EAAE,MAAM,EAAE,EACtB,GAAG,IAAA,yKAAO,EAAiB;QAC1B,UAAU,IAAA,6KAAW,EAAC;QACtB,eAAe;YACb,gBAAgB,aAAa,kBAAkB;YAC/C,iBAAiB,aAAa,mBAAmB;YACjD,gBAAgB,aAAa,kBAAkB;YAC/C,eAAe,aAAa,iBAAiB;YAC7C,cAAc,aAAa,gBAAgB;YAC3C,gBACE,AAAC,aAAa,kBAAwC;YACxD,aAAa,aAAa,eAAe;YACzC,iBAAiB,aAAa,mBAAmB;YACjD,gBAAgB,aAAa,kBAAkB;YAC/C,qBAAqB,aAAa,uBAAuB;YACzD,eAAe,aAAa,iBAAiB;YAC7C,eAAe,aAAa,iBAAiB;YAC7C,qBAAqB,aAAa,uBAAuB;YACzD,sBAAsB,aAAa,wBAAwB;YAC3D,MAAM,aAAa,QAAQ;YAC3B,gBAAgB,aAAa,kBAAkB;YAC/C,wBAAwB,aAAa,0BAA0B;YAC/D,qBAAqB,aAAa,uBAAuB;QAC3D;IACF;IAEA,uDAAuD;IACvD,MAAM,wBAAwB,MAAM;IAEpC,qEAAqE;IACrE,MAAM,sBAAsB,aAAa,IAAI,CAC3C,CAAC,OAAS,KAAK,EAAE,KAAK;IAExB,MAAM,sBAAsB,qBAAqB,SAAS;IAE1D,kEAAkE;IAClE,MAAM,4BAA4B,CAAC;QACjC,MAAM,WAAW,EAAE,MAAM,CAAC,KAAK;QAC/B,MAAM,iBAAiB,aAAa,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QAE/D,wDAAwD;QACxD,IAAI,gBAAgB,SAAS,sBAAsB;YACjD,SAAS,iBAAiB;QAC5B;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,aAAkC;YACtC,gBAAgB,KAAK,cAAc;YACnC,iBAAiB,KAAK,eAAe;YACrC,gBAAgB,KAAK,cAAc;YACnC,eAAe,KAAK,aAAa;YACjC,cAAc,KAAK,YAAY;YAC/B,gBAAgB,KAAK,cAAc;YACnC,aAAa,KAAK,WAAW;YAC7B,iBAAiB,KAAK,eAAe,IAAI;YACzC,gBAAgB,KAAK,cAAc;YACnC,qBAAqB,KAAK,mBAAmB;YAC7C,eAAe,KAAK,aAAa;YACjC,eAAe,KAAK,aAAa;YACjC,qBAAqB,KAAK,mBAAmB;YAC7C,sBAAsB,KAAK,oBAAoB;YAC/C,MAAM,KAAK,IAAI,IAAI;YACnB,gBAAgB,KAAK,cAAc,IAAI;YACvC,wBAAwB,KAAK,sBAAsB,IAAI;YACvD,qBAAqB,KAAK,mBAAmB,IAAI;QACnD;QACA,SAAS;IACX;IAEA,qBACE,8OAAC;QAAK,UAAU,aAAa;QAAe,WAAU;;0BAEpD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DAC/C,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEhD,8OAAC,sIAAK;wCACH,GAAG,SAAS,iBAAiB;wCAC9B,aAAY;wCACZ,OAAO,OAAO,cAAc,EAAE;;;;;;;;;;;;0CAGlC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DACjD,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE9C,8OAAC,sIAAK;wCACH,GAAG,SAAS,kBAAkB;wCAC/B,MAAK;wCACL,aAAY;wCACZ,OAAO,OAAO,eAAe,EAAE;;;;;;;;;;;;;;;;;;;;;;;;0BAOvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DAC/C,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEhD,8OAAC;wCACE,GAAG,SAAS,kBAAkB;4CAC7B,UAAU;wCACZ,EAAE;wCACF,UAAU;wCACV,WAAW,CAAC,wBAAwB,EAClC,OAAO,cAAc,GAAG,mBAAmB,kBAC5C,qHAAqH,CAAC;;0DAEvH,8OAAC;gDAAO,OAAM;0DACX,wBAAwB,eAAe;;;;;;4CAEzC,aAAa,GAAG,CAAC,CAAC,qBACjB,8OAAC;oDAAqB,OAAO,KAAK,EAAE;8DACjC,KAAK,IAAI,CACP,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,SAAS,CAAC,IAAM,EAAE,WAAW;mDAH7B,KAAK,EAAE;;;;;;;;;;;oCAOvB,OAAO,cAAc,kBACpB,8OAAC;wCAAE,WAAU;kDACV,OAAO,cAAc,CAAC,OAAO;;;;;;;;;;;;4BAMnC,qCACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACE,GAAG,SAAS,gBAAgB;gDAC7B,MAAK;gDACL,IAAG;gDACH,WAAU;;;;;;0DAEZ,8OAAC;gDACC,SAAQ;gDACR,WAAU;0DACX;;;;;;;;;;;;kDAIH,8OAAC;wCAAI,WAAU;kDAAmF;;;;;;;;;;;;;;;;;;;;;;;;0BAS1G,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DACjD,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE9C,8OAAC,sIAAK;wCACH,GAAG,SAAS,eAAe;wCAC5B,aAAY;wCACZ,OAAO,OAAO,YAAY,EAAE;;;;;;;;;;;;0CAIhC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;;oDAA+C;kEACvD,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAExC,8OAAC;gDACE,GAAG,SAAS,iBAAiB;gDAC9B,WAAW,CAAC,wBAAwB,EAClC,OAAO,cAAc,GAAG,mBAAmB,kBAC5C,oEAAoE,CAAC;;kEAEtE,8OAAC;wDAAO,OAAM;kEAAO;;;;;;kEACrB,8OAAC;wDAAO,OAAM;kEAAS;;;;;;;;;;;;4CAExB,OAAO,cAAc,kBACpB,8OAAC;gDAAE,WAAU;0DACV,OAAO,cAAc,CAAC,OAAO;;;;;;;;;;;;kDAKpC,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;;oDAA+C;kEAC1D,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAErC,8OAAC,sIAAK;gDACH,GAAG,SAAS,eAAe;oDAAE,eAAe;gDAAK,EAAE;gDACpD,MAAK;gDACL,KAAI;gDACJ,KAAI;gDACJ,aAAY;gDACZ,OAAO,OAAO,WAAW,EAAE;;;;;;;;;;;;;;;;;;0CAKjC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCACE,GAAG,SAAS,kBAAkB;wCAC/B,MAAM;wCACN,aAAY;wCACZ,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAOlB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DAC/C,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEhD,8OAAC;wCACE,GAAG,SAAS,iBAAiB;wCAC9B,MAAM;wCACN,aAAY;wCACZ,WAAW,CAAC,wBAAwB,EAClC,OAAO,cAAc,GAAG,mBAAmB,kBAC5C,oEAAoE,CAAC;;;;;;oCAEvE,OAAO,cAAc,kBACpB,8OAAC;wCAAE,WAAU;kDACV,OAAO,cAAc,CAAC,OAAO;;;;;;;;;;;;0CAKpC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DAC1C,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAErD,8OAAC;wCACE,GAAG,SAAS,sBAAsB;wCACnC,MAAM;wCACN,aAAY;wCACZ,WAAW,CAAC,wBAAwB,EAClC,OAAO,mBAAmB,GACtB,mBACA,kBACL,oEAAoE,CAAC;;;;;;oCAEvE,OAAO,mBAAmB,kBACzB,8OAAC;wCAAE,WAAU;kDACV,OAAO,mBAAmB,CAAC,OAAO;;;;;;;;;;;;0CAKzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;;oDAA+C;kEAChD,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAE/C,8OAAC,sIAAK;gDACH,GAAG,SAAS,gBAAgB;gDAC7B,MAAK;gDACL,OAAO,OAAO,aAAa,EAAE;;;;;;;;;;;;kDAGjC,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;;oDAA+C;kEAChD,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAE/C,8OAAC,sIAAK;gDACH,GAAG,SAAS,gBAAgB;gDAC7B,MAAK;gDACL,OAAO,OAAO,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DAC1C,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAErD,8OAAC,sIAAK;wCACH,GAAG,SAAS,sBAAsB;wCACnC,aAAY;wCACZ,OAAO,OAAO,mBAAmB,EAAE;;;;;;;;;;;;0CAGvC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;;4CAA+C;0DACzC,8OAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEtD,8OAAC,sIAAK;wCACH,GAAG,SAAS,uBAAuB;wCACpC,MAAK;wCACL,aAAY;wCACZ,OAAO,OAAO,oBAAoB,EAAE;;;;;;;;;;;;;;;;;;;;;;;;0BAO5C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCACE,GAAG,SAAS,OAAO;wCACpB,MAAM;wCACN,aAAY;wCACZ,WAAU;;;;;;;;;;;;0CAId,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC,sIAAK;gDACH,GAAG,SAAS,iBAAiB;gDAC9B,MAAK;gDACL,aAAY;gDACZ,OAAO,OAAO,cAAc,EAAE;;;;;;;;;;;;kDAGlC,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC,sIAAK;gDACH,GAAG,SAAS,yBAAyB;gDACtC,MAAK;gDACL,aAAY;gDACZ,OAAO,OAAO,sBAAsB,EAAE;;;;;;;;;;;;kDAG1C,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC,sIAAK;gDACH,GAAG,SAAS,sBAAsB;gDACnC,MAAK;gDACL,aAAY;gDACZ,OAAO,OAAO,mBAAmB,EAAE;;;;;;;;;;;;;;;;;;0CAKzC,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;0BAOzC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,MAAK;oBACL,UAAU;oBACV,WAAU;8BAET,eAAe,cAAc;;;;;;;;;;;;;;;;;AAKxC"}},
    {"offset": {"line": 1573, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/app/dashboard/reports/%5Bid%5D/edit/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { use } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport { useReportById, useUpdateReport } from \"@/hooks/useReports\";\r\nimport ReportForm from \"@/components/forms/ReportForm\";\r\nimport type { CreateReportRequest } from \"@/lib/types\";\r\n\r\nexport default function EditReportPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ id: string }>;\r\n}) {\r\n  // Unwrap params using React.use()\r\n  const { id } = use(params);\r\n  const router = useRouter();\r\n\r\n  // Fetch report data\r\n  const {\r\n    data: reportResponse,\r\n    isLoading,\r\n    error,\r\n  } = useReportById(id);\r\n\r\n  const report = reportResponse?.data;\r\n\r\n  // Update mutation\r\n  const updateMutation = useUpdateReport(id);\r\n\r\n  const handleSubmit = async (data: CreateReportRequest) => {\r\n    try {\r\n      // Convert CreateReportRequest to UpdateReportRequest\r\n      // Send all fields since the form has complete data\r\n      const updateData = {\r\n        requester_name: data.requester_name,\r\n        requester_phone: data.requester_phone,\r\n        transport_type: data.transport_type,\r\n        use_stretcher: data.use_stretcher,\r\n        patient_name: data.patient_name,\r\n        patient_gender: data.patient_gender,\r\n        patient_age: data.patient_age,\r\n        patient_history: data.patient_history,\r\n        pickup_address: data.pickup_address,\r\n        destination_address: data.destination_address,\r\n        schedule_date: data.schedule_date,\r\n        schedule_time: data.schedule_time,\r\n        contact_person_name: data.contact_person_name,\r\n        contact_person_phone: data.contact_person_phone,\r\n        note: data.note,\r\n        attachment_ktp: data.attachment_ktp,\r\n        attachment_house_photo: data.attachment_house_photo,\r\n        attachment_sharelok: data.attachment_sharelok,\r\n      };\r\n      \r\n      await updateMutation.mutateAsync(updateData);\r\n      \r\n      // Refresh router cache and redirect\r\n      router.refresh();\r\n      router.push(`/dashboard/reports/${id}`);\r\n    } catch (error) {\r\n      // Error is already handled by the mutation hook\r\n      console.error(\"Failed to update report:\", error);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading report data...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !report) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <p className=\"text-red-600 mb-4\">\r\n          {error\r\n            ? `Error: ${\r\n                error instanceof Error\r\n                  ? error.message\r\n                  : \"Failed to load report\"\r\n              }`\r\n            : \"Report not found\"}\r\n        </p>\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"text-red-600 hover:text-red-700 font-medium\"\r\n        >\r\n          ‚Üê Go Back\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Prepare initial data for the form\r\n  const initialData: Partial<CreateReportRequest> = {\r\n    requester_name: report.requester_name,\r\n    requester_phone: report.requester_phone,\r\n    transport_type: report.transport_type,\r\n    use_stretcher: report.use_stretcher,\r\n    patient_name: report.patient_name,\r\n    patient_gender: report.patient_gender,\r\n    patient_age: report.patient_age,\r\n    patient_history: report.patient_history || \"\",\r\n    pickup_address: report.pickup_address,\r\n    destination_address: report.destination_address,\r\n    schedule_date: report.schedule_date,\r\n    schedule_time: report.schedule_time,\r\n    contact_person_name: report.contact_person_name,\r\n    contact_person_phone: report.contact_person_phone,\r\n    note: report.note || \"\",\r\n    attachment_ktp: report.attachment_ktp || \"\",\r\n    attachment_house_photo: report.attachment_house_photo || \"\",\r\n    attachment_sharelok: report.attachment_sharelok || \"\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 max-w-4xl\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n        >\r\n          <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\r\n        </button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Edit Report</h1>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Update emergency incident report #{id.slice(0, 8)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <ReportForm\r\n        initialData={initialData}\r\n        onSubmit={handleSubmit}\r\n        isSubmitting={updateMutation.isPending}\r\n        submitButtonText=\"Update Report\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}