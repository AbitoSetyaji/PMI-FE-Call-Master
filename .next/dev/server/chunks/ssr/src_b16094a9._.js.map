{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/api.ts"],"sourcesContent":["import type {\r\n  User,\r\n  Vehicle,\r\n  VehicleType,\r\n  Report,\r\n  Assignment,\r\n  DriverLocation,\r\n  CreateVehicleTypeRequest,\r\n  CreateVehicleRequest,\r\n  UpdateVehicleRequest,\r\n  CreateReportRequest,\r\n  UpdateReportRequest,\r\n  CreateAssignmentRequest,\r\n  UpdateAssignmentRequest,\r\n  CreateDriverLocationRequest,\r\n  ApiResponse,\r\n  PaginatedResponse,\r\n} from \"./types\";\r\n\r\nconst API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\";\r\n\r\n// Helper function for API calls\r\nasync function apiCall<T>(\r\n  endpoint: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"pmi_auth_token\") : null;\r\n\r\n  const headers = new Headers(options.headers);\r\n  headers.set(\"Content-Type\", \"application/json\");\r\n\r\n  if (token) {\r\n    headers.set(\"Authorization\", `Bearer ${token}`);\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json();\r\n    throw new Error(error.message || `API Error: ${response.status}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n// ============== USERS (helper functions) ==============\r\n\r\nexport async function getUserById(id: string): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateUser(\r\n  id: string,\r\n  data: Partial<User>\r\n): Promise<User> {\r\n  const response = await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\n// ============== VEHICLE TYPES ==============\r\nexport const vehicleTypes = {\r\n  getVehicleTypes: async (): Promise<ApiResponse<VehicleType[]>> => {\r\n    return await apiCall<ApiResponse<VehicleType[]>>(\"/vehicle-types\");\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  },\r\n  createVehicleType: async (data: CreateVehicleTypeRequest): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicleType: async (id: string, data: Partial<CreateVehicleTypeRequest>): Promise<ApiResponse<VehicleType>> => {\r\n    return await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicleType: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicle-types/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\nexport const vehicleTypesApi = vehicleTypes;\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleTypeById(id: string): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicleType(data: CreateVehicleTypeRequest): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(\"/vehicle-types\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicleType(id: string, data: Partial<CreateVehicleTypeRequest>): Promise<VehicleType> {\r\n  const response = await apiCall<ApiResponse<VehicleType>>(`/vehicle-types/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicleType(id: string): Promise<void> {\r\n  await apiCall(`/vehicle-types/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== VEHICLES ==============\r\nexport const vehicles = {\r\n  getAll: async (params?: { status?: string }): Promise<ApiResponse<Vehicle[]>> => {\r\n    const queryParams = params?.status ? `?status=${params.status}` : '';\r\n    return await apiCall<ApiResponse<Vehicle[]>>(`/vehicles${queryParams}`);\r\n  },\r\n  getById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  // Alias for getById for backward compatibility\r\n  getVehicleById: async (id: string): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  },\r\n  createVehicle: async (data: CreateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateVehicle: async (id: string, data: UpdateVehicleRequest): Promise<ApiResponse<Vehicle>> => {\r\n    return await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteVehicle: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/vehicles/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n};\r\n\r\n// Helper functions for backward compatibility\r\nexport async function getVehicleById(id: string): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createVehicle(data: CreateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(\"/vehicles\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateVehicle(id: string, data: UpdateVehicleRequest): Promise<Vehicle> {\r\n  const response = await apiCall<ApiResponse<Vehicle>>(`/vehicles/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteVehicle(id: string): Promise<void> {\r\n  await apiCall(`/vehicles/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== REPORTS ==============\r\nexport async function reports(): Promise<Report[]> {\r\n  const response = await apiCall<ApiResponse<Report[]>>(\"/reports\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getReportById(id: string): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`);\r\n  return response.data!;\r\n}\r\n\r\nexport async function createReport(\r\n  data: CreateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(\"/reports\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateReport(\r\n  id: string,\r\n  data: UpdateReportRequest\r\n): Promise<Report> {\r\n  const response = await apiCall<ApiResponse<Report>>(`/reports/${id}`, {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteReport(id: string): Promise<void> {\r\n  await apiCall(`/reports/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== ASSIGNMENTS ==============\r\nexport async function assignments(): Promise<Assignment[]> {\r\n  const response = await apiCall<ApiResponse<Assignment[]>>(\"/assignments\");\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getAssignmentById(id: string): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createAssignment(\r\n  data: CreateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\"/assignments\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(data),\r\n  });\r\n  return response.data!;\r\n}\r\n\r\nexport async function updateAssignment(\r\n  id: string,\r\n  data: UpdateAssignmentRequest\r\n): Promise<Assignment> {\r\n  const response = await apiCall<ApiResponse<Assignment>>(\r\n    `/assignments/${id}`,\r\n    {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function deleteAssignment(id: string): Promise<void> {\r\n  await apiCall(`/assignments/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n\r\n// ============== DRIVER LOCATIONS ==============\r\nexport async function driverLocations(): Promise<DriverLocation[]> {\r\n  const response = await apiCall<ApiResponse<DriverLocation[]>>(\r\n    \"/driver-locations\"\r\n  );\r\n  return response.data || [];\r\n}\r\n\r\nexport async function getDriverLocationById(id: string): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    `/driver-locations/${id}`\r\n  );\r\n  return response.data!;\r\n}\r\n\r\nexport async function createDriverLocation(\r\n  data: CreateDriverLocationRequest\r\n): Promise<DriverLocation> {\r\n  const response = await apiCall<ApiResponse<DriverLocation>>(\r\n    \"/driver-locations\",\r\n    {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }\r\n  );\r\n  return response.data!;\r\n}\r\n\r\n// ============== ORGANIZED API OBJECTS ==============\r\n\r\n// Assignments API\r\nexport const assignmentsApi = {\r\n  getAll: assignments,\r\n  getById: getAssignmentById,\r\n  create: createAssignment,\r\n  update: updateAssignment,\r\n  delete: deleteAssignment,\r\n\r\n  // Driver-specific endpoints\r\n  getAssignmentsByDriver: async (driverId: string): Promise<ApiResponse<Assignment[]>> => {\r\n    return await apiCall<ApiResponse<Assignment[]>>(`/assignments/driver/${driverId}`);\r\n  },\r\n\r\n  updateDriverAssignment: async (\r\n    assignmentId: string,\r\n    data: { vehicle_id?: string; status?: string }\r\n  ): Promise<ApiResponse<Assignment>> => {\r\n    return await apiCall<ApiResponse<Assignment>>(`/assignments/${assignmentId}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Reports API\r\nexport const reportsApi = {\r\n  getAll: reports,\r\n  getById: getReportById,\r\n  create: createReport,\r\n  update: updateReport,\r\n  delete: deleteReport,\r\n\r\n  // Update report status\r\n  updateReportStatus: async (\r\n    reportId: string,\r\n    data: { status: string }\r\n  ): Promise<ApiResponse<Report>> => {\r\n    return await apiCall<ApiResponse<Report>>(`/reports/${reportId}/status`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n};\r\n\r\n// Vehicles API\r\nexport const vehiclesApi = {\r\n  getAll: vehicles.getAll,\r\n  getById: vehicles.getById,\r\n  create: vehicles.createVehicle,\r\n  update: vehicles.updateVehicle,\r\n  delete: vehicles.deleteVehicle,\r\n};\r\n\r\n// Users API\r\nexport const users = {\r\n  getUsers: async (params?: { role?: string }): Promise<ApiResponse<User[]>> => {\r\n    const queryParams = params?.role ? `?role=${params.role}` : '';\r\n    return await apiCall<ApiResponse<User[]>>(`/users${queryParams}`);\r\n  },\r\n  getById: getUserById,\r\n  update: updateUser,\r\n  createUser: async (data: { name: string; email: string; password: string; role: string }): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>('/users', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  updateUser: async (id: string, data: Partial<User>): Promise<ApiResponse<User>> => {\r\n    return await apiCall<ApiResponse<User>>(`/users/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n  deleteUser: async (id: string): Promise<ApiResponse<void>> => {\r\n    return await apiCall<ApiResponse<void>>(`/users/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  },\r\n};\r\n\r\nexport const usersApi = users;\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/schemas.ts"],"sourcesContent":["/**\r\n * API Response Schemas for Zod Validation\r\n * Validates data from backend before use in components\r\n */\r\n\r\nimport { z } from \"zod\";\r\n\r\n// ============== BASE SCHEMAS ==============\r\nexport const paginationSchema = z.object({\r\n    total: z.number(),\r\n    page: z.number(),\r\n    size: z.number(),\r\n    pages: z.number(),\r\n});\r\n\r\nexport const apiResponseSchema = <T extends z.ZodType>(dataSchema: T) =>\r\n    z.object({\r\n        status: z.string(),\r\n        message: z.string(),\r\n        data: dataSchema,\r\n        pagination: paginationSchema.optional(),\r\n    });\r\n\r\n// ============== ENTITY SCHEMAS ==============\r\nexport const vehicleTypeSchema = z.object({\r\n    id: z.string(),\r\n    name: z.string(),\r\n    description: z.string().nullable().optional(),\r\n    created_at: z.string(),\r\n    updated_at: z.string().optional(),\r\n});\r\n\r\nexport const vehicleSchema = z.object({\r\n    id: z.string(),\r\n    name: z.string(),\r\n    plate_number: z.string(),\r\n    type: z.string(),\r\n    status: z.enum([\"available\", \"on_duty\", \"maintenance\", \"in_use\"]),\r\n    vehicle_type_name: z.string().nullable().optional(),\r\n    created_at: z.string(),\r\n    updated_at: z.string().optional(),\r\n});\r\n\r\nexport const userSchema = z.object({\r\n    id: z.string(),\r\n    name: z.string(),\r\n    email: z.string().email(),\r\n    role: z.enum([\"admin\", \"driver\", \"reporter\"]),\r\n    created_at: z.string(),\r\n    updated_at: z.string().optional(),\r\n});\r\n\r\nexport const reportSchema = z.object({\r\n    id: z.string(),\r\n    title: z.string(),\r\n    description: z.string(),\r\n    location: z.string(),\r\n    latitude: z.number().nullable().optional(),\r\n    longitude: z.number().nullable().optional(),\r\n    priority: z.enum([\"low\", \"medium\", \"high\", \"urgent\"]),\r\n    status: z.enum([\"open\", \"in_progress\", \"assigned\", \"completed\", \"cancelled\"]),\r\n    reporter_id: z.string(),\r\n    reporter_name: z.string().optional(),\r\n    created_at: z.string(),\r\n    updated_at: z.string().optional(),\r\n});\r\n\r\n// ============== RESPONSE SCHEMAS ==============\r\nexport const vehicleTypesResponseSchema = apiResponseSchema(z.array(vehicleTypeSchema));\r\nexport const vehicleTypeResponseSchema = apiResponseSchema(vehicleTypeSchema);\r\nexport const vehiclesResponseSchema = apiResponseSchema(z.array(vehicleSchema));\r\nexport const usersResponseSchema = apiResponseSchema(z.array(userSchema));\r\nexport const reportsResponseSchema = apiResponseSchema(z.array(reportSchema));\r\n\r\n// ============== TYPE EXPORTS ==============\r\nexport type VehicleTypeData = z.infer<typeof vehicleTypeSchema>;\r\nexport type VehicleData = z.infer<typeof vehicleSchema>;\r\nexport type UserData = z.infer<typeof userSchema>;\r\nexport type ReportData = z.infer<typeof reportSchema>;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;;;;;;;AAED;;AAGO,MAAM,mBAAmB,uKAAC,CAAC,MAAM,CAAC;IACrC,OAAO,uKAAC,CAAC,MAAM;IACf,MAAM,uKAAC,CAAC,MAAM;IACd,MAAM,uKAAC,CAAC,MAAM;IACd,OAAO,uKAAC,CAAC,MAAM;AACnB;AAEO,MAAM,oBAAoB,CAAsB,aACnD,uKAAC,CAAC,MAAM,CAAC;QACL,QAAQ,uKAAC,CAAC,MAAM;QAChB,SAAS,uKAAC,CAAC,MAAM;QACjB,MAAM;QACN,YAAY,iBAAiB,QAAQ;IACzC;AAGG,MAAM,oBAAoB,uKAAC,CAAC,MAAM,CAAC;IACtC,IAAI,uKAAC,CAAC,MAAM;IACZ,MAAM,uKAAC,CAAC,MAAM;IACd,aAAa,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAC3C,YAAY,uKAAC,CAAC,MAAM;IACpB,YAAY,uKAAC,CAAC,MAAM,GAAG,QAAQ;AACnC;AAEO,MAAM,gBAAgB,uKAAC,CAAC,MAAM,CAAC;IAClC,IAAI,uKAAC,CAAC,MAAM;IACZ,MAAM,uKAAC,CAAC,MAAM;IACd,cAAc,uKAAC,CAAC,MAAM;IACtB,MAAM,uKAAC,CAAC,MAAM;IACd,QAAQ,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAa;QAAW;QAAe;KAAS;IAChE,mBAAmB,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACjD,YAAY,uKAAC,CAAC,MAAM;IACpB,YAAY,uKAAC,CAAC,MAAM,GAAG,QAAQ;AACnC;AAEO,MAAM,aAAa,uKAAC,CAAC,MAAM,CAAC;IAC/B,IAAI,uKAAC,CAAC,MAAM;IACZ,MAAM,uKAAC,CAAC,MAAM;IACd,OAAO,uKAAC,CAAC,MAAM,GAAG,KAAK;IACvB,MAAM,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAU;KAAW;IAC5C,YAAY,uKAAC,CAAC,MAAM;IACpB,YAAY,uKAAC,CAAC,MAAM,GAAG,QAAQ;AACnC;AAEO,MAAM,eAAe,uKAAC,CAAC,MAAM,CAAC;IACjC,IAAI,uKAAC,CAAC,MAAM;IACZ,OAAO,uKAAC,CAAC,MAAM;IACf,aAAa,uKAAC,CAAC,MAAM;IACrB,UAAU,uKAAC,CAAC,MAAM;IAClB,UAAU,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACxC,WAAW,uKAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACzC,UAAU,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAU;QAAQ;KAAS;IACpD,QAAQ,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAe;QAAY;QAAa;KAAY;IAC5E,aAAa,uKAAC,CAAC,MAAM;IACrB,eAAe,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAClC,YAAY,uKAAC,CAAC,MAAM;IACpB,YAAY,uKAAC,CAAC,MAAM,GAAG,QAAQ;AACnC;AAGO,MAAM,6BAA6B,kBAAkB,uKAAC,CAAC,KAAK,CAAC;AAC7D,MAAM,4BAA4B,kBAAkB;AACpD,MAAM,yBAAyB,kBAAkB,uKAAC,CAAC,KAAK,CAAC;AACzD,MAAM,sBAAsB,kBAAkB,uKAAC,CAAC,KAAK,CAAC;AACtD,MAAM,wBAAwB,kBAAkB,uKAAC,CAAC,KAAK,CAAC"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/safeApi.ts"],"sourcesContent":["/**\r\n * Safe API Utilities\r\n * Validates API responses with Zod and provides safe parsing\r\n */\r\n\r\nimport { z } from \"zod\";\r\n\r\ninterface ParseResult<T> {\r\n    success: boolean;\r\n    data: T | null;\r\n    error: string | null;\r\n}\r\n\r\n/**\r\n * Safely parse data with Zod schema\r\n * Logs validation errors without crashing the app\r\n */\r\nexport function safeParse<T>(\r\n    schema: z.ZodType<T>,\r\n    data: unknown,\r\n    context: string = \"API Response\"\r\n): ParseResult<T> {\r\n    try {\r\n        const parsed = schema.parse(data);\r\n        return { success: true, data: parsed, error: null };\r\n    } catch (error) {\r\n        if (error instanceof z.ZodError) {\r\n            const errorMessage = error.errors\r\n                .map((e) => `${e.path.join(\".\")}: ${e.message}`)\r\n                .join(\", \");\r\n\r\n            console.error(`[Zod Validation Error] ${context}:`, errorMessage);\r\n            console.error(\"[Invalid Data]:\", JSON.stringify(data, null, 2).slice(0, 500));\r\n\r\n            return { success: false, data: null, error: errorMessage };\r\n        }\r\n\r\n        console.error(`[Parse Error] ${context}:`, error);\r\n        return { success: false, data: null, error: \"Unknown parsing error\" };\r\n    }\r\n}\r\n\r\n/**\r\n * Safely parse with fallback value\r\n */\r\nexport function safeParseWithFallback<T>(\r\n    schema: z.ZodType<T>,\r\n    data: unknown,\r\n    fallback: T,\r\n    context: string = \"API Response\"\r\n): T {\r\n    const result = safeParse(schema, data, context);\r\n    return result.success ? result.data! : fallback;\r\n}\r\n\r\n/**\r\n * Extract and validate array data from paginated API response\r\n */\r\nexport function extractArrayData<T>(\r\n    response: unknown,\r\n    itemSchema: z.ZodType<T>,\r\n    context: string = \"API Response\"\r\n): T[] {\r\n    // Handle different response structures\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const responseData = (response as any)?.data;\r\n\r\n    if (!responseData) {\r\n        console.warn(`[Data Extraction] ${context}: No data field found`);\r\n        return [];\r\n    }\r\n\r\n    if (!Array.isArray(responseData)) {\r\n        console.warn(`[Data Extraction] ${context}: Data is not an array`);\r\n        return [];\r\n    }\r\n\r\n    // Validate each item, filter out invalid ones\r\n    const validItems: T[] = [];\r\n    responseData.forEach((item, index) => {\r\n        const result = safeParse(itemSchema, item, `${context}[${index}]`);\r\n        if (result.success && result.data) {\r\n            validItems.push(result.data);\r\n        }\r\n    });\r\n\r\n    return validItems;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAED;;AAYO,SAAS,UACZ,MAAoB,EACpB,IAAa,EACb,UAAkB,cAAc;IAEhC,IAAI;QACA,MAAM,SAAS,OAAO,KAAK,CAAC;QAC5B,OAAO;YAAE,SAAS;YAAM,MAAM;YAAQ,OAAO;QAAK;IACtD,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,uKAAC,CAAC,QAAQ,EAAE;YAC7B,MAAM,eAAe,MAAM,MAAM,CAC5B,GAAG,CAAC,CAAC,IAAM,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,OAAO,EAAE,EAC9C,IAAI,CAAC;YAEV,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC,EAAE;YACpD,QAAQ,KAAK,CAAC,mBAAmB,KAAK,SAAS,CAAC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG;YAExE,OAAO;gBAAE,SAAS;gBAAO,MAAM;gBAAM,OAAO;YAAa;QAC7D;QAEA,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,EAAE;QAC3C,OAAO;YAAE,SAAS;YAAO,MAAM;YAAM,OAAO;QAAwB;IACxE;AACJ;AAKO,SAAS,sBACZ,MAAoB,EACpB,IAAa,EACb,QAAW,EACX,UAAkB,cAAc;IAEhC,MAAM,SAAS,UAAU,QAAQ,MAAM;IACvC,OAAO,OAAO,OAAO,GAAG,OAAO,IAAI,GAAI;AAC3C;AAKO,SAAS,iBACZ,QAAiB,EACjB,UAAwB,EACxB,UAAkB,cAAc;IAEhC,uCAAuC;IACvC,8DAA8D;IAC9D,MAAM,eAAgB,UAAkB;IAExC,IAAI,CAAC,cAAc;QACf,QAAQ,IAAI,CAAC,CAAC,kBAAkB,EAAE,QAAQ,qBAAqB,CAAC;QAChE,OAAO,EAAE;IACb;IAEA,IAAI,CAAC,MAAM,OAAO,CAAC,eAAe;QAC9B,QAAQ,IAAI,CAAC,CAAC,kBAAkB,EAAE,QAAQ,sBAAsB,CAAC;QACjE,OAAO,EAAE;IACb;IAEA,8CAA8C;IAC9C,MAAM,aAAkB,EAAE;IAC1B,aAAa,OAAO,CAAC,CAAC,MAAM;QACxB,MAAM,SAAS,UAAU,YAAY,MAAM,GAAG,QAAQ,CAAC,EAAE,MAAM,CAAC,CAAC;QACjE,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;YAC/B,WAAW,IAAI,CAAC,OAAO,IAAI;QAC/B;IACJ;IAEA,OAAO;AACX"}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/hooks/useVehicleTypes.ts"],"sourcesContent":["/**\r\n * useVehicleTypes Hook\r\n * Handles all vehicle types data fetching and mutations\r\n * Separated from view for clean architecture\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { vehicleTypes } from \"@/lib/api\";\r\nimport { vehicleTypeSchema, VehicleTypeData } from \"@/lib/schemas\";\r\nimport { extractArrayData } from \"@/lib/safeApi\";\r\nimport { toast } from \"sonner\";\r\nimport type { CreateVehicleTypeRequest } from \"@/lib/types\";\r\n\r\nexport function useVehicleTypes() {\r\n    const queryClient = useQueryClient();\r\n\r\n    // Fetch vehicle types with Zod validation\r\n    const {\r\n        data: typesData,\r\n        isLoading,\r\n        error,\r\n        refetch,\r\n    } = useQuery({\r\n        queryKey: [\"vehicle-types\"],\r\n        queryFn: () => vehicleTypes.getVehicleTypes(),\r\n        staleTime: 0,\r\n        refetchInterval: 10 * 1000,\r\n    });\r\n\r\n    // Validate and extract data using Zod\r\n    const types: VehicleTypeData[] = typesData\r\n        ? extractArrayData(typesData, vehicleTypeSchema, \"VehicleTypes\")\r\n        : [];\r\n\r\n    // Delete mutation\r\n    const deleteMutation = useMutation({\r\n        mutationFn: (id: string) => vehicleTypes.deleteVehicleType(id),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicle-types\"] });\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicles\"] });\r\n            toast.success(\"Vehicle type deleted successfully\");\r\n        },\r\n        onError: (error: Error) => {\r\n            const axiosError = error as { response?: { data?: { detail?: string } } };\r\n            toast.error(axiosError?.response?.data?.detail || \"Failed to delete vehicle type\");\r\n        },\r\n    });\r\n\r\n    // Create mutation\r\n    const createMutation = useMutation({\r\n        mutationFn: (data: CreateVehicleTypeRequest) => vehicleTypes.createVehicleType(data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicle-types\"] });\r\n            toast.success(\"Vehicle type created successfully\");\r\n        },\r\n        onError: (error: Error) => {\r\n            const axiosError = error as { response?: { data?: { detail?: string } } };\r\n            toast.error(axiosError?.response?.data?.detail || \"Failed to create vehicle type\");\r\n        },\r\n    });\r\n\r\n    // Update mutation\r\n    const updateMutation = useMutation({\r\n        mutationFn: ({ id, data }: { id: string; data: CreateVehicleTypeRequest }) =>\r\n            vehicleTypes.updateVehicleType(id, data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicle-types\"] });\r\n            toast.success(\"Vehicle type updated successfully\");\r\n        },\r\n        onError: (error: Error) => {\r\n            const axiosError = error as { response?: { data?: { detail?: string } } };\r\n            toast.error(axiosError?.response?.data?.detail || \"Failed to update vehicle type\");\r\n        },\r\n    });\r\n\r\n    return {\r\n        types,\r\n        isLoading,\r\n        error,\r\n        refetch,\r\n        deleteMutation,\r\n        createMutation,\r\n        updateMutation,\r\n        isDeleting: deleteMutation.isPending,\r\n        isCreating: createMutation.isPending,\r\n        isUpdating: updateMutation.isPending,\r\n    };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;AAED;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAGO,SAAS;IACZ,MAAM,cAAc,IAAA,wMAAc;IAElC,0CAA0C;IAC1C,MAAM,EACF,MAAM,SAAS,EACf,SAAS,EACT,KAAK,EACL,OAAO,EACV,GAAG,IAAA,uLAAQ,EAAC;QACT,UAAU;YAAC;SAAgB;QAC3B,SAAS,IAAM,iIAAY,CAAC,eAAe;QAC3C,WAAW;QACX,iBAAiB,KAAK;IAC1B;IAEA,sCAAsC;IACtC,MAAM,QAA2B,YAC3B,IAAA,yIAAgB,EAAC,WAAW,0IAAiB,EAAE,kBAC/C,EAAE;IAER,kBAAkB;IAClB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,KAAe,iIAAY,CAAC,iBAAiB,CAAC;QAC3D,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAgB;YAAC;YAC5D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;YACvD,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,MAAM,aAAa;YACnB,iJAAK,CAAC,KAAK,CAAC,YAAY,UAAU,MAAM,UAAU;QACtD;IACJ;IAEA,kBAAkB;IAClB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,OAAmC,iIAAY,CAAC,iBAAiB,CAAC;QAC/E,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAgB;YAAC;YAC5D,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,MAAM,aAAa;YACnB,iJAAK,CAAC,KAAK,CAAC,YAAY,UAAU,MAAM,UAAU;QACtD;IACJ;IAEA,kBAAkB;IAClB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,CAAC,EAAE,EAAE,EAAE,IAAI,EAAkD,GACrE,iIAAY,CAAC,iBAAiB,CAAC,IAAI;QACvC,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAgB;YAAC;YAC5D,iJAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,MAAM,aAAa;YACnB,iJAAK,CAAC,KAAK,CAAC,YAAY,UAAU,MAAM,UAAU;QACtD;IACJ;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA,YAAY,eAAe,SAAS;QACpC,YAAY,eAAe,SAAS;QACpC,YAAY,eAAe,SAAS;IACxC;AACJ"}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/ui/FeatureErrorBoundary.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { Component, ErrorInfo, ReactNode } from \"react\";\r\nimport { AlertCircle, RefreshCw } from \"lucide-react\";\r\n\r\ninterface Props {\r\n    children: ReactNode;\r\n    fallback?: ReactNode;\r\n    onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n    featureName?: string;\r\n}\r\n\r\ninterface State {\r\n    hasError: boolean;\r\n    error: Error | null;\r\n}\r\n\r\n/**\r\n * Feature-level Error Boundary\r\n * Compact version for wrapping individual features/sections\r\n * Prevents one broken component from crashing the entire page\r\n */\r\nclass FeatureErrorBoundary extends Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error: Error): State {\r\n        return { hasError: true, error };\r\n    }\r\n\r\n    componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n        const { featureName = \"Feature\", onError } = this.props;\r\n        console.error(`[${featureName} Error]:`, error, errorInfo);\r\n        onError?.(error, errorInfo);\r\n    }\r\n\r\n    handleRetry = () => {\r\n        this.setState({ hasError: false, error: null });\r\n    };\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            if (this.props.fallback) return this.props.fallback;\r\n\r\n            return (\r\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\r\n                    <AlertCircle className=\"w-8 h-8 text-red-500 mx-auto mb-3\" />\r\n                    <h3 className=\"text-sm font-semibold text-red-900 mb-1\">\r\n                        {this.props.featureName || \"This section\"} encountered an error\r\n                    </h3>\r\n                    <p className=\"text-xs text-red-700 mb-3\">\r\n                        {process.env.NODE_ENV === \"development\" && this.state.error?.message}\r\n                    </p>\r\n                    <button\r\n                        onClick={this.handleRetry}\r\n                        className=\"inline-flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700\"\r\n                    >\r\n                        <RefreshCw className=\"w-3 h-3\" />\r\n                        Retry\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default FeatureErrorBoundary;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAiBA;;;;CAIC,GACD,MAAM,6BAA6B,kNAAS;IACxC,YAAY,KAAY,CAAE;QACtB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;YAAO,OAAO;QAAK;IAChD;IAEA,OAAO,yBAAyB,KAAY,EAAS;QACjD,OAAO;YAAE,UAAU;YAAM;QAAM;IACnC;IAEA,kBAAkB,KAAY,EAAE,SAAoB,EAAE;QAClD,MAAM,EAAE,cAAc,SAAS,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,KAAK;QACvD,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,YAAY,QAAQ,CAAC,EAAE,OAAO;QAChD,UAAU,OAAO;IACrB;IAEA,cAAc;QACV,IAAI,CAAC,QAAQ,CAAC;YAAE,UAAU;YAAO,OAAO;QAAK;IACjD,EAAE;IAEF,SAAS;QACL,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACrB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;YAEnD,qBACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,mOAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC;wBAAG,WAAU;;4BACT,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI;4BAAe;;;;;;;kCAE9C,8OAAC;wBAAE,WAAU;kCACR,oDAAyB,iBAAiB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;;;;;;kCAEjE,8OAAC;wBACG,SAAS,IAAI,CAAC,WAAW;wBACzB,WAAU;;0CAEV,8OAAC,6NAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;QAKjD;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC9B;AACJ;uCAEe"}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/ui/EmptyState.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { AlertCircle, FileX, Loader2, ShieldOff, Plus, RefreshCw } from \"lucide-react\";\r\n\r\ntype EmptyStateVariant = \"empty\" | \"error\" | \"loading\" | \"no-permission\";\r\n\r\ninterface EmptyStateProps {\r\n    variant?: EmptyStateVariant;\r\n    title?: string;\r\n    description?: string;\r\n    icon?: React.ReactNode;\r\n    actionLabel?: string;\r\n    onAction?: () => void;\r\n    className?: string;\r\n}\r\n\r\nconst defaultConfig = {\r\n    empty: {\r\n        icon: <FileX className=\"w-12 h-12 text-gray-400\" />,\r\n        title: \"No data found\",\r\n        description: \"There are no items to display at the moment.\",\r\n    },\r\n    error: {\r\n        icon: <AlertCircle className=\"w-12 h-12 text-red-500\" />,\r\n        title: \"Failed to load data\",\r\n        description: \"Something went wrong while fetching the data. Please try again.\",\r\n    },\r\n    loading: {\r\n        icon: <Loader2 className=\"w-12 h-12 text-blue-500 animate-spin\" />,\r\n        title: \"Loading...\",\r\n        description: \"Please wait while we fetch the data.\",\r\n    },\r\n    \"no-permission\": {\r\n        icon: <ShieldOff className=\"w-12 h-12 text-orange-500\" />,\r\n        title: \"Access Denied\",\r\n        description: \"You don't have permission to view this content.\",\r\n    },\r\n};\r\n\r\nexport default function EmptyState({\r\n    variant = \"empty\",\r\n    title,\r\n    description,\r\n    icon,\r\n    actionLabel,\r\n    onAction,\r\n    className = \"\",\r\n}: EmptyStateProps) {\r\n    const config = defaultConfig[variant];\r\n\r\n    return (\r\n        <div className={`flex flex-col items-center justify-center py-12 px-4 ${className}`}>\r\n            {/* Icon */}\r\n            <div className=\"mb-4\">{icon || config.icon}</div>\r\n\r\n            {/* Title */}\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2 text-center\">\r\n                {title || config.title}\r\n            </h3>\r\n\r\n            {/* Description */}\r\n            <p className=\"text-sm text-gray-500 text-center max-w-md mb-6\">\r\n                {description || config.description}\r\n            </p>\r\n\r\n            {/* Action Button */}\r\n            {actionLabel && onAction && (\r\n                <button\r\n                    onClick={onAction}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                >\r\n                    {variant === \"error\" ? <RefreshCw className=\"w-4 h-4\" /> : <Plus className=\"w-4 h-4\" />}\r\n                    {actionLabel}\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAgBA,MAAM,gBAAgB;IAClB,OAAO;QACH,oBAAM,8OAAC,iNAAK;YAAC,WAAU;;;;;;QACvB,OAAO;QACP,aAAa;IACjB;IACA,OAAO;QACH,oBAAM,8OAAC,mOAAW;YAAC,WAAU;;;;;;QAC7B,OAAO;QACP,aAAa;IACjB;IACA,SAAS;QACL,oBAAM,8OAAC,4NAAO;YAAC,WAAU;;;;;;QACzB,OAAO;QACP,aAAa;IACjB;IACA,iBAAiB;QACb,oBAAM,8OAAC,6NAAS;YAAC,WAAU;;;;;;QAC3B,OAAO;QACP,aAAa;IACjB;AACJ;AAEe,SAAS,WAAW,EAC/B,UAAU,OAAO,EACjB,KAAK,EACL,WAAW,EACX,IAAI,EACJ,WAAW,EACX,QAAQ,EACR,YAAY,EAAE,EACA;IACd,MAAM,SAAS,aAAa,CAAC,QAAQ;IAErC,qBACI,8OAAC;QAAI,WAAW,CAAC,qDAAqD,EAAE,WAAW;;0BAE/E,8OAAC;gBAAI,WAAU;0BAAQ,QAAQ,OAAO,IAAI;;;;;;0BAG1C,8OAAC;gBAAG,WAAU;0BACT,SAAS,OAAO,KAAK;;;;;;0BAI1B,8OAAC;gBAAE,WAAU;0BACR,eAAe,OAAO,WAAW;;;;;;YAIrC,eAAe,0BACZ,8OAAC;gBACG,SAAS;gBACT,WAAU;;oBAET,YAAY,wBAAU,8OAAC,6NAAS;wBAAC,WAAU;;;;;6CAAe,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBAC1E;;;;;;;;;;;;;AAKrB"}},
    {"offset": {"line": 848, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\n\r\n// Combine classnames\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return clsx(inputs);\r\n}\r\n\r\n// Format date and time\r\nexport function formatDateTime(date: string | Date): string {\r\n  const d = typeof date === \"string\" ? new Date(date) : date;\r\n  return d.toLocaleDateString(\"id-ID\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n}\r\n\r\n// Format date only\r\nexport function formatDate(date: string | Date): string {\r\n  const d = typeof date === \"string\" ? new Date(date) : date;\r\n  return d.toLocaleDateString(\"id-ID\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  });\r\n}\r\n\r\n// Format time only\r\nexport function formatTime(date: string | Date): string {\r\n  const d = typeof date === \"string\" ? new Date(date) : date;\r\n  return d.toLocaleTimeString(\"id-ID\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n  });\r\n}\r\n\r\n// Get status badge color\r\nexport function getStatusColor(\r\n  status: string\r\n): \"default\" | \"secondary\" | \"destructive\" | \"outline\" {\r\n  const statusMap: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\r\n    // Report statuses\r\n    open: \"default\",\r\n    in_progress: \"secondary\",\r\n    assigned: \"secondary\",\r\n    completed: \"default\",\r\n    cancelled: \"destructive\",\r\n\r\n    // Assignment statuses\r\n    pending: \"default\",\r\n    accepted: \"secondary\",\r\n    rejected: \"destructive\",\r\n\r\n    // Vehicle statuses\r\n    available: \"default\",\r\n    in_use: \"secondary\",\r\n    maintenance: \"destructive\",\r\n    inactive: \"outline\",\r\n\r\n    // User roles\r\n    admin: \"default\",\r\n    driver: \"secondary\",\r\n    reporter: \"outline\",\r\n\r\n    // Priority levels\r\n    low: \"outline\",\r\n    medium: \"secondary\",\r\n    high: \"default\",\r\n    urgent: \"destructive\",\r\n  };\r\n\r\n  return statusMap[status] || \"default\";\r\n}\r\n\r\n// Get priority badge color\r\nexport function getPriorityColor(priority: string): string {\r\n  const colors: Record<string, string> = {\r\n    low: \"bg-blue-100 text-blue-800\",\r\n    medium: \"bg-yellow-100 text-yellow-800\",\r\n    high: \"bg-orange-100 text-orange-800\",\r\n    urgent: \"bg-red-100 text-red-800\",\r\n  };\r\n  return colors[priority] || \"bg-gray-100 text-gray-800\";\r\n}\r\n\r\n// Get status badge color class\r\nexport function getStatusBadgeColor(status: string): string {\r\n  const colors: Record<string, string> = {\r\n    // Report statuses\r\n    open: \"bg-blue-100 text-blue-800\",\r\n    in_progress: \"bg-purple-100 text-purple-800\",\r\n    assigned: \"bg-indigo-100 text-indigo-800\",\r\n    completed: \"bg-green-100 text-green-800\",\r\n    cancelled: \"bg-red-100 text-red-800\",\r\n\r\n    // Assignment statuses\r\n    pending: \"bg-yellow-100 text-yellow-800\",\r\n    accepted: \"bg-green-100 text-green-800\",\r\n    rejected: \"bg-red-100 text-red-800\",\r\n\r\n    // Vehicle statuses\r\n    available: \"bg-green-100 text-green-800\",\r\n    in_use: \"bg-blue-100 text-blue-800\",\r\n    maintenance: \"bg-orange-100 text-orange-800\",\r\n    inactive: \"bg-gray-100 text-gray-800\",\r\n  };\r\n  return colors[status] || \"bg-gray-100 text-gray-800\";\r\n}\r\n\r\n// Capitalize first letter\r\nexport function capitalize(str: string): string {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n// Format role name\r\nexport function formatRole(role: string): string {\r\n  const roleMap: Record<string, string> = {\r\n    admin: \"Administrator\",\r\n    driver: \"Driver\",\r\n    reporter: \"Reporter\",\r\n  };\r\n  return roleMap[role] || capitalize(role);\r\n}\r\n\r\n// Format status name\r\nexport function formatStatus(status: string): string {\r\n  return status\r\n    .split(\"_\")\r\n    .map((word) => capitalize(word))\r\n    .join(\" \");\r\n}\r\n\r\n// Convert file size to readable format\r\nexport function formatFileSize(bytes: number): string {\r\n  if (bytes === 0) return \"0 Bytes\";\r\n\r\n  const k = 1024;\r\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i];\r\n}\r\n\r\n// Validate email\r\nexport function isValidEmail(email: string): boolean {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\n// Validate phone number\r\nexport function isValidPhoneNumber(phone: string): boolean {\r\n  const phoneRegex = /^(\\+62|0)[0-9]{9,12}$/;\r\n  return phoneRegex.test(phone.replace(/[-\\s]/g, \"\"));\r\n}\r\n\r\n// Distance between two coordinates (in km)\r\nexport function calculateDistance(\r\n  lat1: number,\r\n  lon1: number,\r\n  lat2: number,\r\n  lon2: number\r\n): number {\r\n  const R = 6371; // Earth's radius in km\r\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\r\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos((lat1 * Math.PI) / 180) *\r\n      Math.cos((lat2 * Math.PI) / 180) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return R * c;\r\n}\r\n\r\n// Format coordinates\r\nexport function formatCoordinates(lat: number, lon: number): string {\r\n  return `${lat.toFixed(6)}, ${lon.toFixed(6)}`;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1018, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/dashboard/VehicleTypesList.tsx"],"sourcesContent":["\"use client\";\r\n\r\n/**\r\n * Vehicle Types List Component\r\n * Displays the table/cards of vehicle types\r\n * Extracted to keep page file under 150 lines\r\n */\r\n\r\nimport { formatDateTime } from \"@/lib/utils\";\r\nimport { Edit, Trash2 } from \"lucide-react\";\r\nimport type { VehicleTypeData } from \"@/lib/schemas\";\r\n\r\ninterface VehicleTypesListProps {\r\n    types: VehicleTypeData[];\r\n    isAdmin: boolean;\r\n    onEdit: (type: VehicleTypeData) => void;\r\n    onDelete: (id: string, name: string) => void;\r\n}\r\n\r\nexport default function VehicleTypesList({ types, isAdmin, onEdit, onDelete }: VehicleTypesListProps) {\r\n    return (\r\n        <>\r\n            {/* Desktop Table */}\r\n            <div className=\"hidden md:block overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                    <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Description</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Created</th>\r\n                            {isAdmin && (\r\n                                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase\">Actions</th>\r\n                            )}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {types.map((type) => (\r\n                            <tr key={type.id} className=\"hover:bg-gray-50\">\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                    <div className=\"text-sm font-medium text-gray-900\">{type.name}</div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4\">\r\n                                    <div className=\"text-sm text-gray-600\">{type.description || \"-\"}</div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                    {formatDateTime(type.created_at)}\r\n                                </td>\r\n                                {isAdmin && (\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\r\n                                        <button onClick={() => onEdit(type)} className=\"text-blue-600 hover:text-blue-900 mr-4\">\r\n                                            <Edit className=\"w-4 h-4 inline\" />\r\n                                        </button>\r\n                                        <button onClick={() => onDelete(type.id, type.name)} className=\"text-red-600 hover:text-red-900\">\r\n                                            <Trash2 className=\"w-4 h-4 inline\" />\r\n                                        </button>\r\n                                    </td>\r\n                                )}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Mobile Cards */}\r\n            <div className=\"md:hidden divide-y divide-gray-200\">\r\n                {types.map((type) => (\r\n                    <div key={type.id} className=\"p-4\">\r\n                        <div className=\"mb-3\">\r\n                            <h3 className=\"font-semibold text-gray-900 mb-1\">{type.name}</h3>\r\n                            <p className=\"text-sm text-gray-600\">{type.description || \"No description\"}</p>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-500 mb-3\">Created: {formatDateTime(type.created_at)}</p>\r\n                        {isAdmin && (\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => onEdit(type)}\r\n                                    className=\"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-sm font-medium\"\r\n                                >\r\n                                    <Edit className=\"w-4 h-4 inline mr-1\" /> Edit\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => onDelete(type.id, type.name)}\r\n                                    className=\"flex-1 px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm font-medium\"\r\n                                >\r\n                                    <Trash2 className=\"w-4 h-4 inline mr-1\" /> Delete\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;CAIC,GAED;AACA;AAAA;AATA;;;;AAmBe,SAAS,iBAAiB,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAyB;IAChG,qBACI;;0BAEI,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAM,WAAU;;sCACb,8OAAC;4BAAM,WAAU;sCACb,cAAA,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAAkE;;;;;;kDAChF,8OAAC;wCAAG,WAAU;kDAAkE;;;;;;kDAChF,8OAAC;wCAAG,WAAU;kDAAkE;;;;;;oCAC/E,yBACG,8OAAC;wCAAG,WAAU;kDAAmE;;;;;;;;;;;;;;;;;sCAI7F,8OAAC;4BAAM,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAC,qBACR,8OAAC;oCAAiB,WAAU;;sDACxB,8OAAC;4CAAG,WAAU;sDACV,cAAA,8OAAC;gDAAI,WAAU;0DAAqC,KAAK,IAAI;;;;;;;;;;;sDAEjE,8OAAC;4CAAG,WAAU;sDACV,cAAA,8OAAC;gDAAI,WAAU;0DAAyB,KAAK,WAAW,IAAI;;;;;;;;;;;sDAEhE,8OAAC;4CAAG,WAAU;sDACT,IAAA,qIAAc,EAAC,KAAK,UAAU;;;;;;wCAElC,yBACG,8OAAC;4CAAG,WAAU;;8DACV,8OAAC;oDAAO,SAAS,IAAM,OAAO;oDAAO,WAAU;8DAC3C,cAAA,8OAAC,mNAAI;wDAAC,WAAU;;;;;;;;;;;8DAEpB,8OAAC;oDAAO,SAAS,IAAM,SAAS,KAAK,EAAE,EAAE,KAAK,IAAI;oDAAG,WAAU;8DAC3D,cAAA,8OAAC,oNAAM;wDAAC,WAAU;;;;;;;;;;;;;;;;;;mCAhBzB,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;0BA2BhC,8OAAC;gBAAI,WAAU;0BACV,MAAM,GAAG,CAAC,CAAC,qBACR,8OAAC;wBAAkB,WAAU;;0CACzB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAG,WAAU;kDAAoC,KAAK,IAAI;;;;;;kDAC3D,8OAAC;wCAAE,WAAU;kDAAyB,KAAK,WAAW,IAAI;;;;;;;;;;;;0CAE9D,8OAAC;gCAAE,WAAU;;oCAA6B;oCAAU,IAAA,qIAAc,EAAC,KAAK,UAAU;;;;;;;4BACjF,yBACG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCACG,SAAS,IAAM,OAAO;wCACtB,WAAU;;0DAEV,8OAAC,mNAAI;gDAAC,WAAU;;;;;;4CAAwB;;;;;;;kDAE5C,8OAAC;wCACG,SAAS,IAAM,SAAS,KAAK,EAAE,EAAE,KAAK,IAAI;wCAC1C,WAAU;;0DAEV,8OAAC,oNAAM;gDAAC,WAAU;;;;;;4CAAwB;;;;;;;;;;;;;;uBAlBhD,KAAK,EAAE;;;;;;;;;;;;AA2BrC"}},
    {"offset": {"line": 1297, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/forms/VehicleTypeModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { vehicleTypes } from \"@/lib/api\";\r\nimport { toast } from \"sonner\";\r\nimport type { VehicleType, CreateVehicleTypeRequest } from \"@/lib/types\";\r\n\r\ninterface VehicleTypeModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    vehicleType: VehicleType | null;\r\n}\r\n\r\n/**\r\n * Vehicle Type Modal Component\r\n * For creating and editing vehicle types\r\n * Extracted for cleaner code organization\r\n */\r\nexport default function VehicleTypeModal({ isOpen, onClose, vehicleType }: VehicleTypeModalProps) {\r\n    const queryClient = useQueryClient();\r\n    const [formData, setFormData] = useState({\r\n        name: vehicleType?.name || \"\",\r\n        description: vehicleType?.description || \"\",\r\n    });\r\n\r\n    const mutation = useMutation({\r\n        mutationFn: (data: CreateVehicleTypeRequest) =>\r\n            vehicleType\r\n                ? vehicleTypes.updateVehicleType(vehicleType.id, data)\r\n                : vehicleTypes.createVehicleType(data),\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicle-types\"] });\r\n            queryClient.invalidateQueries({ queryKey: [\"vehicles\"] });\r\n            toast.success(vehicleType ? \"Vehicle type updated\" : \"Vehicle type created\");\r\n            onClose();\r\n        },\r\n        onError: (error: Error) => {\r\n            const axiosError = error as { response?: { data?: { detail?: string } } };\r\n            toast.error(axiosError?.response?.data?.detail || \"Failed to save vehicle type\");\r\n        },\r\n    });\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        mutation.mutate(formData);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                    {vehicleType ? \"Edit Vehicle Type\" : \"Add New Vehicle Type\"}\r\n                </h2>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Name <span className=\"text-red-600\">*</span>\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.name}\r\n                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\r\n                            placeholder=\"e.g., Ambulance, Fire Truck\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Description (Optional)\r\n                        </label>\r\n                        <textarea\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\r\n                            rows={3}\r\n                            placeholder=\"Brief description\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={mutation.isPending}\r\n                            className=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50\"\r\n                        >\r\n                            {mutation.isPending ? \"Saving...\" : vehicleType ? \"Update\" : \"Create\"}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAmBe,SAAS,iBAAiB,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAyB;IAC5F,MAAM,cAAc,IAAA,wMAAc;IAClC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACrC,MAAM,aAAa,QAAQ;QAC3B,aAAa,aAAa,eAAe;IAC7C;IAEA,MAAM,WAAW,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OACT,cACM,iIAAY,CAAC,iBAAiB,CAAC,YAAY,EAAE,EAAE,QAC/C,iIAAY,CAAC,iBAAiB,CAAC;QACzC,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAgB;YAAC;YAC5D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;YACvD,iJAAK,CAAC,OAAO,CAAC,cAAc,yBAAyB;YACrD;QACJ;QACA,SAAS,CAAC;YACN,MAAM,aAAa;YACnB,iJAAK,CAAC,KAAK,CAAC,YAAY,UAAU,MAAM,UAAU;QACtD;IACJ;IAEA,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,SAAS,MAAM,CAAC;IACpB;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BACT,cAAc,sBAAsB;;;;;;8BAGzC,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;;wCAA+C;sDACvD,8OAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAExC,8OAAC;oCACG,MAAK;oCACL,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACjE,WAAU;oCACV,aAAY;oCACZ,QAAQ;;;;;;;;;;;;sCAIhB,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACG,OAAO,SAAS,WAAW;oCAC3B,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,aAAa,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACxE,WAAU;oCACV,MAAM;oCACN,aAAY;;;;;;;;;;;;sCAIpB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCACG,MAAK;oCACL,SAAS;oCACT,WAAU;8CACb;;;;;;8CAGD,8OAAC;oCACG,MAAK;oCACL,UAAU,SAAS,SAAS;oCAC5B,WAAU;8CAET,SAAS,SAAS,GAAG,cAAc,cAAc,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzF"}},
    {"offset": {"line": 1484, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/components/ui/LoadingSpinner.tsx"],"sourcesContent":["export function LoadingSpinner({\r\n  size = \"md\",\r\n  text,\r\n}: {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  text?: string;\r\n}) {\r\n  const sizes = {\r\n    sm: \"w-4 h-4 border-2\",\r\n    md: \"w-8 h-8 border-4\",\r\n    lg: \"w-12 h-12 border-4\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center gap-2\">\r\n      <div\r\n        className={`${sizes[size]} border-gray-200 border-t-red-600 rounded-full animate-spin`}\r\n      />\r\n      {text && <p className=\"text-sm text-gray-600\">{text}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function LoadingPage({ text = \"Loading...\" }: { text?: string } = {}) {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <LoadingSpinner size=\"lg\" text={text} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ButtonSpinner() {\r\n  return (\r\n    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n  );\r\n}\r\n\r\n// Skeleton Loaders\r\nexport function SkeletonText({ className = \"\" }: { className?: string }) {\r\n  return (\r\n    <div className={`h-4 bg-gray-200 rounded animate-pulse ${className}`} />\r\n  );\r\n}\r\n\r\nexport function SkeletonCard() {\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow p-6 space-y-4 animate-pulse\">\r\n      <div className=\"h-6 bg-gray-200 rounded w-3/4\" />\r\n      <div className=\"space-y-2\">\r\n        <div className=\"h-4 bg-gray-200 rounded\" />\r\n        <div className=\"h-4 bg-gray-200 rounded w-5/6\" />\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <div className=\"h-8 bg-gray-200 rounded w-20\" />\r\n        <div className=\"h-8 bg-gray-200 rounded w-24\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SkeletonTable({ rows = 5 }: { rows?: number }) {\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"bg-gray-50 px-6 py-4 border-b border-gray-200\">\r\n        <div className=\"flex gap-4\">\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rows */}\r\n      {Array.from({ length: rows }).map((_, i) => (\r\n        <div\r\n          key={i}\r\n          className=\"px-6 py-4 border-b border-gray-200 last:border-b-0\"\r\n        >\r\n          <div className=\"flex gap-4\">\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/4 animate-pulse\" />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SkeletonList({ items = 3 }: { items?: number }) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {Array.from({ length: items }).map((_, i) => (\r\n        <SkeletonCard key={i} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SkeletonStats() {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n      {Array.from({ length: 4 }).map((_, i) => (\r\n        <div\r\n          key={i}\r\n          className=\"bg-white rounded-lg shadow p-6 space-y-3 animate-pulse\"\r\n        >\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/2\" />\r\n          <div className=\"h-8 bg-gray-200 rounded w-2/3\" />\r\n          <div className=\"h-3 bg-gray-200 rounded w-1/3\" />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SkeletonMap() {\r\n  return (\r\n    <div className=\"w-full h-[500px] bg-gray-200 rounded-lg animate-pulse flex items-center justify-center\">\r\n      <div className=\"text-gray-400 text-center\">\r\n        <div className=\"text-4xl mb-2\"></div>\r\n        <p>Loading map...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAO,SAAS,eAAe,EAC7B,OAAO,IAAI,EACX,IAAI,EAIL;IACC,MAAM,QAAQ;QACZ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,2DAA2D,CAAC;;;;;;YAEvF,sBAAQ,8OAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAGrD;AAEO,SAAS,YAAY,EAAE,OAAO,YAAY,EAAqB,GAAG,CAAC,CAAC;IACzE,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAe,MAAK;YAAK,MAAM;;;;;;;;;;;AAGtC;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;;;;;AAEnB;AAGO,SAAS,aAAa,EAAE,YAAY,EAAE,EAA0B;IACrE,qBACE,8OAAC;QAAI,WAAW,CAAC,sCAAsC,EAAE,WAAW;;;;;;AAExE;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAEjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;AAEO,SAAS,cAAc,EAAE,OAAO,CAAC,EAAqB;IAC3D,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;YAKlB,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,8OAAC;oBAEC,WAAU;8BAEV,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;mBAPZ;;;;;;;;;;;AAaf;AAEO,SAAS,aAAa,EAAE,QAAQ,CAAC,EAAsB;IAC5D,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAM,GAAG,GAAG,CAAC,CAAC,GAAG,kBACrC,8OAAC,kBAAkB;;;;;;;;;;AAI3B;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,8OAAC;gBAEC,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;eALV;;;;;;;;;;AAUf;AAEO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAgB;;;;;;8BAC/B,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAIX"}},
    {"offset": {"line": 1831, "column": 0}, "map": {"version":3,"sources":["file:///F:/kulaih/server/PMI-FE-Call/src/app/dashboard/vehicles/types/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\n/**\r\n * Vehicle Types Page - Anti-Fragile Architecture\r\n * \r\n *  Input Protection: Zod validation via useVehicleTypes hook\r\n *  Fault Tolerance: FeatureErrorBoundary wraps main content  \r\n *  Fallback UI: EmptyState component for error/empty states\r\n *  Clean Code: Under 150 lines, logic in hooks, view in components\r\n */\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowLeft, Plus } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { useVehicleTypes } from \"@/hooks/useVehicleTypes\";\r\nimport FeatureErrorBoundary from \"@/components/ui/FeatureErrorBoundary\";\r\nimport EmptyState from \"@/components/ui/EmptyState\";\r\nimport VehicleTypesList from \"@/components/dashboard/VehicleTypesList\";\r\nimport VehicleTypeModal from \"@/components/forms/VehicleTypeModal\";\r\nimport { SkeletonTable } from \"@/components/ui/LoadingSpinner\";\r\nimport type { VehicleType } from \"@/lib/types\";\r\n\r\nexport default function VehicleTypesPage() {\r\n  const router = useRouter();\r\n  const { user } = useAuth();\r\n  const isAdmin = user?.role === \"admin\";\r\n\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [selectedType, setSelectedType] = useState<VehicleType | null>(null);\r\n\r\n  // All data fetching and mutations handled in hook with Zod validation\r\n  const { types, isLoading, error, deleteMutation, refetch } = useVehicleTypes();\r\n\r\n  const handleEdit = (type: VehicleType) => {\r\n    setSelectedType(type);\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleDelete = (id: string, name: string) => {\r\n    if (confirm(`Are you sure you want to delete vehicle type \"${name}\"?`)) {\r\n      deleteMutation.mutate(id);\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsAddModalOpen(false);\r\n    setIsEditModalOpen(false);\r\n    setSelectedType(null);\r\n  };\r\n\r\n  // Render content based on state\r\n  const renderContent = () => {\r\n    if (isLoading) {\r\n      return <SkeletonTable rows={3} />;\r\n    }\r\n\r\n    if (error) {\r\n      return (\r\n        <EmptyState\r\n          variant=\"error\"\r\n          title=\"Failed to load vehicle types\"\r\n          description=\"We couldn't fetch the vehicle types data. Please check your connection and try again.\"\r\n          actionLabel=\"Try Again\"\r\n          onAction={() => refetch()}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (types.length === 0) {\r\n      return (\r\n        <EmptyState\r\n          variant=\"empty\"\r\n          title=\"No vehicle types found\"\r\n          description={isAdmin ? \"Click 'Add Type' to create your first vehicle type.\" : \"No vehicle types have been created yet.\"}\r\n          actionLabel={isAdmin ? \"Add Type\" : undefined}\r\n          onAction={isAdmin ? () => setIsAddModalOpen(true) : undefined}\r\n        />\r\n      );\r\n    }\r\n\r\n    return <VehicleTypesList types={types} isAdmin={isAdmin} onEdit={handleEdit} onDelete={handleDelete} />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <button onClick={() => router.back()} className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\r\n            <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\r\n          </button>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Vehicle Types</h1>\r\n            <p className=\"text-gray-600 mt-1\">Manage vehicle categories</p>\r\n          </div>\r\n        </div>\r\n        {isAdmin && (\r\n          <button\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n          >\r\n            <Plus className=\"w-5 h-5\" />\r\n            Add Type\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Main Content with Error Boundary */}\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <FeatureErrorBoundary featureName=\"Vehicle Types List\">\r\n          {renderContent()}\r\n        </FeatureErrorBoundary>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <VehicleTypeModal\r\n        isOpen={isAddModalOpen || isEditModalOpen}\r\n        onClose={closeModal}\r\n        vehicleType={selectedType}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;CAOC,GAED;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;;;;;;;;;;;;AAuBe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IACxB,MAAM,UAAU,MAAM,SAAS;IAE/B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAqB;IAErE,sEAAsE;IACtE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,cAAc,EAAE,OAAO,EAAE,GAAG,IAAA,kJAAe;IAE5E,MAAM,aAAa,CAAC;QAClB,gBAAgB;QAChB,mBAAmB;IACrB;IAEA,MAAM,eAAe,CAAC,IAAY;QAChC,IAAI,QAAQ,CAAC,8CAA8C,EAAE,KAAK,EAAE,CAAC,GAAG;YACtE,eAAe,MAAM,CAAC;QACxB;IACF;IAEA,MAAM,aAAa;QACjB,kBAAkB;QAClB,mBAAmB;QACnB,gBAAgB;IAClB;IAEA,gCAAgC;IAChC,MAAM,gBAAgB;QACpB,IAAI,WAAW;YACb,qBAAO,8OAAC,2JAAa;gBAAC,MAAM;;;;;;QAC9B;QAEA,IAAI,OAAO;YACT,qBACE,8OAAC,iJAAU;gBACT,SAAQ;gBACR,OAAM;gBACN,aAAY;gBACZ,aAAY;gBACZ,UAAU,IAAM;;;;;;QAGtB;QAEA,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,qBACE,8OAAC,iJAAU;gBACT,SAAQ;gBACR,OAAM;gBACN,aAAa,UAAU,wDAAwD;gBAC/E,aAAa,UAAU,aAAa;gBACpC,UAAU,UAAU,IAAM,kBAAkB,QAAQ;;;;;;QAG1D;QAEA,qBAAO,8OAAC,8JAAgB;YAAC,OAAO;YAAO,SAAS;YAAS,QAAQ;YAAY,UAAU;;;;;;IACzF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,SAAS,IAAM,OAAO,IAAI;gCAAI,WAAU;0CAC9C,cAAA,8OAAC,6NAAS;oCAAC,WAAU;;;;;;;;;;;0CAEvB,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,8OAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;;;;;;;oBAGrC,yBACC,8OAAC;wBACC,SAAS,IAAM,kBAAkB;wBACjC,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;0BAOlC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2JAAoB;oBAAC,aAAY;8BAC/B;;;;;;;;;;;0BAKL,8OAAC,0JAAgB;gBACf,QAAQ,kBAAkB;gBAC1B,SAAS;gBACT,aAAa;;;;;;;;;;;;AAIrB"}}]
}