module.exports=[24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},74566,a=>{"use strict";let b=(0,a.i(70106).default)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);a.s(["Navigation",()=>b],74566)},41089,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(32636),e=a.i(50944),f=a.i(24987);let g=(0,a.i(70106).default)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var h=a.i(69520),i=a.i(74566);function j(){let{user:a,isLoading:j}=(0,d.useAuth)(),k=(0,e.useRouter)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)([]);return((0,c.useEffect)(()=>{j||(a?"driver"!==a.role&&k.push("/dashboard"):k.push("/login"))},[a,j,k]),j)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-red-600 rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):a&&"driver"===a.role?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Location Sharing"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Share your location for real-time tracking"})]}),(0,b.jsx)(i.Navigation,{className:"w-12 h-12 text-blue-600"})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g,{className:`w-6 h-6 ${l?"text-green-600":"text-gray-400"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Status"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:l?"On Duty":"Off Duty"})]})]}),(0,b.jsx)("button",{onClick:()=>{m(!l),s(null)},className:`px-4 py-2 rounded-lg font-medium transition-colors ${l?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:l?"Go Off Duty":"Go On Duty"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.RefreshCw,{className:`w-6 h-6 ${n?"text-blue-600":"text-gray-400"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Auto-Update"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:n?"Enabled":"Disabled"})]})]}),(0,b.jsx)("button",{onClick:()=>o(!n),disabled:!l,className:`px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:n?"Disable":"Enable"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(f.MapPin,{className:"w-6 h-6 text-red-600"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Current Location"})]}),p?(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,b.jsxs)("p",{children:["Lat: ",p.lat.toFixed(6)]}),(0,b.jsxs)("p",{children:["Lng: ",p.lng.toFixed(6)]})]}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No location yet"}),(0,b.jsx)("button",{onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(a=>{let{latitude:b,longitude:c}=a.coords;q({lat:b,lng:c}),s(null)},a=>{s(`Error getting location: ${a.message}`)}):s("Geolocation is not supported by this browser")},className:"mt-2 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Get Location"})]})]}),r&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:r})}),(0,b.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>{p&&u([{id:Date.now().toString(),latitude:p.lat,longitude:p.lng,timestamp:new Date().toISOString(),status:l?"on_duty":"idle",updated_at:new Date().toISOString()},...t])},disabled:!p||!l,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Update Location Now"}),n&&(0,b.jsxs)("p",{className:"flex items-center text-sm text-gray-600",children:[(0,b.jsx)(h.RefreshCw,{className:"w-4 h-4 mr-2 animate-spin"}),"Auto-updating every 30 seconds"]})]})]}),t.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Location Updates"}),(0,b.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.MapPin,{className:`w-5 h-5 ${"on_duty"===a.status?"text-green-600":"text-gray-400"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[a.latitude.toFixed(6),", ",a.longitude.toFixed(6)]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:new Date(a.timestamp).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"on_duty"===a.status?"bg-green-100 text-green-800":"bg-gray-200 text-gray-600"}`,children:"on_duty"===a.status?"On Duty":"Idle"}),0===c&&(0,b.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Latest"})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"How to use:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[(0,b.jsx)("li",{children:'Click "Go On Duty" to start sharing your location'}),(0,b.jsx)("li",{children:'Enable "Auto-Update" to automatically send location every 30 seconds'}),(0,b.jsx)("li",{children:'Click "Get Location" to manually fetch your current position'}),(0,b.jsx)("li",{children:'Click "Update Location Now" to manually send location to server'}),(0,b.jsx)("li",{children:"Your location will be visible on the tracking dashboard"})]})]})]})}):null}a.s(["default",()=>j],41089)}];

//# sourceMappingURL=_445fdbfd._.js.map