module.exports=[97117,a=>{"use strict";var b=a.i(87924),c=a.i(95245),d=a.i(59501),e=a.i(33217),f=a.i(19032),g=a.i(88780);g.z.object({email:g.z.string().email("Invalid email address"),password:g.z.string().min(6,"Password must be at least 6 characters")}),g.z.object({name:g.z.string().min(2,"Name must be at least 2 characters"),email:g.z.string().email("Invalid email address"),password:g.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:g.z.string(),role:g.z.enum(["admin","driver","reporter"])}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),g.z.object({name:g.z.string().min(2,"Name is required"),description:g.z.string().optional()});let h=g.z.object({name:g.z.string().min(2,"Vehicle name is required"),plate_number:g.z.string().min(4,"Plate number must be at least 4 characters"),type:g.z.string().min(1,"Vehicle type is required"),status:g.z.enum(["available","on_duty","maintenance","in_use"]).default("available")});g.z.object({plate_number:g.z.string().min(4,"Plate number must be at least 4 characters").optional(),name:g.z.string().min(2,"Vehicle name is required").optional(),vehicle_type_id:g.z.string().uuid("Invalid vehicle type").optional(),status:g.z.enum(["available","in_use","maintenance","inactive"]).optional(),driver_id:g.z.string().uuid().optional().nullable()}),g.z.object({title:g.z.string().min(5,"Title must be at least 5 characters"),description:g.z.string().min(10,"Description must be at least 10 characters"),location:g.z.string().min(5,"Location is required"),priority:g.z.enum(["low","medium","high","urgent"])}),g.z.object({title:g.z.string().min(5,"Title must be at least 5 characters").optional(),description:g.z.string().min(10,"Description must be at least 10 characters").optional(),location:g.z.string().min(5,"Location is required").optional(),status:g.z.enum(["open","in_progress","assigned","completed","cancelled"]).optional(),priority:g.z.enum(["low","medium","high","urgent"]).optional()}),g.z.object({report_id:g.z.string().uuid("Invalid report"),vehicle_id:g.z.string().uuid("Invalid vehicle"),driver_id:g.z.string().uuid("Invalid driver")}),g.z.object({status:g.z.enum(["pending","accepted","rejected","completed"]).optional()}),g.z.object({latitude:g.z.number().min(-90,"Invalid latitude").max(90,"Invalid latitude"),longitude:g.z.number().min(-180,"Invalid longitude").max(180,"Invalid longitude")}),g.z.object({name:g.z.string().min(2,"Name must be at least 2 characters"),email:g.z.string().email("Invalid email address"),role:g.z.enum(["admin","driver","reporter"])}),g.z.object({name:g.z.string().min(2,"Name must be at least 2 characters").optional(),email:g.z.string().email("Invalid email address").optional(),role:g.z.enum(["admin","driver","reporter"]).optional()}),g.z.object({currentPassword:g.z.string().min(1,"Current password is required"),newPassword:g.z.string().min(6,"New password must be at least 6 characters"),confirmPassword:g.z.string()}).refine(a=>a.newPassword===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});var i=a.i(89791),j=a.i(7078),k=a.i(92e3);function l({errors:a}){let c=Object.values(a).map(a=>a.message).filter(Boolean);return 0===c.length?null:(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg mb-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Please fix the following errors:"}),(0,b.jsx)("ul",{className:"list-disc list-inside space-y-1",children:c.map((a,c)=>(0,b.jsx)("li",{className:"text-sm text-red-800",children:a},c))})]})]})})}function m({initialData:a,onSubmit:g,isSubmitting:k}){let{register:m,handleSubmit:n,formState:{errors:o}}=(0,c.useForm)({resolver:(0,d.zodResolver)(h),defaultValues:a?{name:a.name,plate_number:a.plate_number,type:a.vehicle_type_id||"",status:"on_duty"===a.status||"available"===a.status||"maintenance"===a.status||"in_use"===a.status?a.status:"available"}:{status:"available"}}),{data:p,isLoading:q}=(0,e.useQuery)({queryKey:["vehicleTypes"],queryFn:f.vehicleTypes.getVehicleTypes}),r=p?.data||[];return(0,b.jsxs)("form",{onSubmit:n(a=>{g({name:a.name,plate_number:a.plate_number,vehicle_type_id:a.type,status:a.status})}),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Vehicle Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.default,{id:"name",type:"text",placeholder:"e.g., Ambulance 01",...m("name"),error:o.name?.message,disabled:k})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"plate_number",className:"block text-sm font-medium text-gray-700 mb-2",children:["Plate Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.default,{id:"plate_number",type:"text",placeholder:"e.g., B 1234 XYZ",...m("plate_number"),error:o.plate_number?.message,disabled:k}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 1-2 letters, space, 1-4 digits, space, 1-3 letters"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Vehicle Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),q?(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Loading types..."})]}):(0,b.jsxs)("select",{id:"type",...m("type"),disabled:k,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${o.type?"border-red-500":""}`,children:[(0,b.jsx)("option",{value:"",children:"Select vehicle type"}),r.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),o.type?.message&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o.type.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{id:"status",...m("status"),disabled:k,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${o.status?"border-red-500":""}`,children:[(0,b.jsx)("option",{value:"available",children:"Available"}),(0,b.jsx)("option",{value:"on_duty",children:"On Duty"}),(0,b.jsx)("option",{value:"maintenance",children:"Maintenance"})]}),o.status?.message&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o.status.message})]}),(0,b.jsx)(l,{errors:o})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(j.default,{type:"submit",variant:"primary",disabled:k,className:"flex-1 sm:flex-none",children:k?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a?"Updating...":"Creating..."]}):(0,b.jsx)("span",{children:a?"Update Vehicle":"Create Vehicle"})}),(0,b.jsx)(j.default,{type:"button",variant:"secondary",onClick:()=>window.history.back(),disabled:k,className:"flex-1 sm:flex-none",children:"Cancel"})]})]})}a.s(["default",()=>m],97117)},89791,a=>{"use strict";var b=a.i(87924);let c=a.i(72131).default.forwardRef(function({label:a,error:c=null,className:d="",id:e,...f},g){let h=e||`input-${a?.toLowerCase().replace(/\s+/g,"-")}`,i=c?`${h}-error`:void 0;return(0,b.jsxs)("div",{className:"mb-4",children:[a&&(0,b.jsx)("label",{htmlFor:h,className:"block text-sm font-medium mb-1 text-gray-700",children:a}),(0,b.jsx)("input",{ref:g,id:h,"aria-invalid":c?"true":"false","aria-describedby":i,className:`w-full rounded-md border px-3 py-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-pmi-red focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed ${c?"border-red-400 focus:ring-red-500":"border-gray-300 hover:border-gray-400"} ${d}`,...f}),c&&(0,b.jsx)("p",{id:i,className:"text-sm text-red-600 mt-1",role:"alert",children:c})]})});a.s(["default",0,c])},70025,a=>{"use strict";var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],70025)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},88780,a=>{"use strict";a.s([],58425),a.i(58425);var b=a.i(29415),c=a.i(7399);a.s(["defaultErrorMap",()=>c.default,"getErrorMap",()=>b.getErrorMap,"setErrorMap",()=>b.setErrorMap],77662),a.i(77662);var d=a.i(85244);a.s([],65416),a.i(65416);var e=a.i(9197),f=a.i(99614),g=a.i(81440);a.s(["BRAND",()=>f.BRAND,"DIRTY",()=>d.DIRTY,"EMPTY_PATH",()=>d.EMPTY_PATH,"INVALID",()=>d.INVALID,"NEVER",()=>f.NEVER,"OK",()=>d.OK,"ParseStatus",()=>d.ParseStatus,"Schema",()=>f.Schema,"ZodAny",()=>f.ZodAny,"ZodArray",()=>f.ZodArray,"ZodBigInt",()=>f.ZodBigInt,"ZodBoolean",()=>f.ZodBoolean,"ZodBranded",()=>f.ZodBranded,"ZodCatch",()=>f.ZodCatch,"ZodDate",()=>f.ZodDate,"ZodDefault",()=>f.ZodDefault,"ZodDiscriminatedUnion",()=>f.ZodDiscriminatedUnion,"ZodEffects",()=>f.ZodEffects,"ZodEnum",()=>f.ZodEnum,"ZodError",()=>g.ZodError,"ZodFirstPartyTypeKind",()=>f.ZodFirstPartyTypeKind,"ZodFunction",()=>f.ZodFunction,"ZodIntersection",()=>f.ZodIntersection,"ZodIssueCode",()=>g.ZodIssueCode,"ZodLazy",()=>f.ZodLazy,"ZodLiteral",()=>f.ZodLiteral,"ZodMap",()=>f.ZodMap,"ZodNaN",()=>f.ZodNaN,"ZodNativeEnum",()=>f.ZodNativeEnum,"ZodNever",()=>f.ZodNever,"ZodNull",()=>f.ZodNull,"ZodNullable",()=>f.ZodNullable,"ZodNumber",()=>f.ZodNumber,"ZodObject",()=>f.ZodObject,"ZodOptional",()=>f.ZodOptional,"ZodParsedType",()=>e.ZodParsedType,"ZodPipeline",()=>f.ZodPipeline,"ZodPromise",()=>f.ZodPromise,"ZodReadonly",()=>f.ZodReadonly,"ZodRecord",()=>f.ZodRecord,"ZodSchema",()=>f.ZodSchema,"ZodSet",()=>f.ZodSet,"ZodString",()=>f.ZodString,"ZodSymbol",()=>f.ZodSymbol,"ZodTransformer",()=>f.ZodTransformer,"ZodTuple",()=>f.ZodTuple,"ZodType",()=>f.ZodType,"ZodUndefined",()=>f.ZodUndefined,"ZodUnion",()=>f.ZodUnion,"ZodUnknown",()=>f.ZodUnknown,"ZodVoid",()=>f.ZodVoid,"addIssueToContext",()=>d.addIssueToContext,"any",()=>f.any,"array",()=>f.array,"bigint",()=>f.bigint,"boolean",()=>f.boolean,"coerce",()=>f.coerce,"custom",()=>f.custom,"date",()=>f.date,"datetimeRegex",()=>f.datetimeRegex,"defaultErrorMap",()=>c.default,"discriminatedUnion",()=>f.discriminatedUnion,"effect",()=>f.effect,"enum",()=>f.enum,"function",()=>f.function,"getErrorMap",()=>b.getErrorMap,"getParsedType",()=>e.getParsedType,"instanceof",()=>f.instanceof,"intersection",()=>f.intersection,"isAborted",()=>d.isAborted,"isAsync",()=>d.isAsync,"isDirty",()=>d.isDirty,"isValid",()=>d.isValid,"late",()=>f.late,"lazy",()=>f.lazy,"literal",()=>f.literal,"makeIssue",()=>d.makeIssue,"map",()=>f.map,"nan",()=>f.nan,"nativeEnum",()=>f.nativeEnum,"never",()=>f.never,"null",()=>f.null,"nullable",()=>f.nullable,"number",()=>f.number,"object",()=>f.object,"objectUtil",()=>e.objectUtil,"oboolean",()=>f.oboolean,"onumber",()=>f.onumber,"optional",()=>f.optional,"ostring",()=>f.ostring,"pipeline",()=>f.pipeline,"preprocess",()=>f.preprocess,"promise",()=>f.promise,"quotelessJson",()=>g.quotelessJson,"record",()=>f.record,"set",()=>f.set,"setErrorMap",()=>b.setErrorMap,"strictObject",()=>f.strictObject,"string",()=>f.string,"symbol",()=>f.symbol,"transformer",()=>f.transformer,"tuple",()=>f.tuple,"undefined",()=>f.undefined,"union",()=>f.union,"unknown",()=>f.unknown,"util",()=>e.util,"void",()=>f.void],73950);var h=a.i(73950);a.s(["z",0,h],88780)},49483,a=>{"use strict";var b=a.i(87924);function c(){return(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}function d({rows:a=5}){return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"})]})}),Array.from({length:a}).map((a,c)=>(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 last:border-b-0",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 animate-pulse"})]})},c))]})}a.s(["ButtonSpinner",()=>c,"SkeletonTable",()=>d])},7078,a=>{"use strict";var b=a.i(87924),c=a.i(49483);function d({variant:a="primary",className:d="",isLoading:e=!1,loadingText:f,children:g,disabled:h,...i}){return(0,b.jsxs)("button",{className:`px-4 py-2 rounded-md font-medium disabled:opacity-60 disabled:cursor-not-allowed transition-all duration-200 ease-in-out flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95 ${({primary:"bg-pmi-red text-white hover:bg-pmi-red-dark focus:ring-pmi-red shadow-sm hover:shadow-md",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500 shadow-sm hover:shadow",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm hover:shadow-md"})[a]} ${d}`.trim(),disabled:h||e,...i,children:[e&&(0,b.jsx)(c.ButtonSpinner,{}),e?f||"Loading...":g]})}a.s(["default",()=>d])},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)}];

//# sourceMappingURL=_74fe6c15._.js.map